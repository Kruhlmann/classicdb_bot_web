import{G as n,a as e,b as t,c as a,d as o,i as r,s as c,e as s,S as i,k as l,v as u,l as d,m as f,n as h,p as _,o as g,x as v,H as m,I as p,q as k,r as w,u as y,y as b,J as x,K as E,L as D,w as $,M as j,f as T,N,O,g as I,h as S,t as M,j as A,A as V,C as P,E as F,F as H,P as R,Q as U,z as Y,R as B}from"./chunk.12266322.js";var L=n(""),C={api_url:"http://149.212.223.80:443/api",months:["January","February","March","April","May","June","July","August","September","October","November","December"],axle_counter_aliases:{axle_counter:"name",number_of_crossings:"# crossings"},allowed_file_types:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12"]};function J(n){var e,t,a,o,r,c,s,i,E,D,$=n.ignored?"":"not";return{c:function(){e=l("div"),t=l("label"),a=l("input"),o=u(),r=l("span"),c=u(),s=l("span"),i=d($),E=d(" ignored"),this.h()},l:function(n){e=f(n,"DIV",{class:!0},!1);var l=h(e);t=f(l,"LABEL",{class:!0},!1);var u=h(t);a=f(u,"INPUT",{type:!0,class:!0},!1),h(a).forEach(_),o=g(u,"\r\n        "),r=f(u,"SPAN",{class:!0},!1),h(r).forEach(_),u.forEach(_),c=g(l,"\r\n    "),s=f(l,"SPAN",{class:!0},!1);var d=h(s);i=g(d,$),E=g(d," ignored"),d.forEach(_),l.forEach(_),this.h()},h:function(){v(a,"type","checkbox"),v(a,"class","svelte-p427kv"),v(r,"class","slider round svelte-p427kv"),v(t,"class","switch svelte-p427kv"),v(s,"class","svelte-p427kv"),m(s,"ignored",n.ignored),m(s,"not-ignored",!n.ignored),v(e,"class","switch-wrap svelte-p427kv"),D=[p(a,"change",n.input_change_handler),p(a,"change",n.emit)]},m:function(l,u){k(l,e,u),w(e,t),w(t,a),a.checked=n.ignored,w(t,o),w(t,r),w(e,c),w(e,s),w(s,i),w(s,E)},p:function(n,e){n.ignored&&(a.checked=e.ignored),n.ignored&&$!==($=e.ignored?"":"not")&&y(i,$),n.ignored&&(m(s,"ignored",e.ignored),m(s,"not-ignored",!e.ignored))},i:b,o:b,d:function(n){n&&_(e),x(D)}}}function q(n,e,t){var a=E(),o=e.ignored,r=void 0!==o&&o;return n.$set=function(n){"ignored"in n&&t("ignored",r=n.ignored)},{ignored:r,emit:function(){a("toggle")},input_change_handler:function(){r=this.checked,t("ignored",r)}}}var G=function(n){function l(n){var e;return t(this,l),e=a(this,o(l).call(this)),r(s(e),n,q,J,c,["ignored"]),e}return e(l,i),l}(),W=D.Object;function X(n,e,t){var a=W.create(n);return a._=e[t],a.i=t,a}function z(n,e,t){var a=W.create(n);return a.date=e[t],a}function K(n,e,t){var a=W.create(n);return a._=e[t],a.i=t,a}function Q(n,e,t){var a=W.create(n);return a.i=e[t],a}function Z(n,e,t){var a=W.create(n);return a.date=e[t],a}function nn(n,e,t){var a=W.create(n);return a.week_number=e[t],a}function en(n){for(var e,t,a,o,r=n.week_number,c=n.weeks[n.week_number],s=[],i=0;i<c.length;i+=1)s[i]=cn(Z(n,c,i));return{c:function(){e=l("td"),t=d(r),a=u();for(var n=0;n<s.length;n+=1)s[n].c();o=$(),this.h()},l:function(n){e=f(n,"TD",{class:!0},!1);var c=h(e);t=g(c,r),c.forEach(_),a=g(n,"\r\n                        ");for(var i=0;i<s.length;i+=1)s[i].l(n);o=$(),this.h()},h:function(){v(e,"class","week-number svelte-6agj4j")},m:function(n,r){k(n,e,r),w(e,t),k(n,a,r);for(var c=0;c<s.length;c+=1)s[c].m(n,r);k(n,o,r)},p:function(n,e){if(n.weeks&&r!==(r=e.week_number)&&y(t,r),n.weeks||n.Object||n.final_day_of_month||n.weekdays||n.is_same_date||n.day_x_next_month||n.year||n.month||n.picked_date||n.Date){c=e.weeks[e.week_number];for(var a=0;a<c.length;a+=1){var i=Z(e,c,a);s[a]?s[a].p(n,i):(s[a]=cn(i),s[a].c(),s[a].m(o.parentNode,o))}for(;a<s.length;a+=1)s[a].d(1);s.length=c.length}},d:function(n){n&&(_(e),_(a)),j(s,n),n&&_(o)}}}function tn(n){for(var e,t=n.weekdays.slice(n.weeks[n.week_number].length),a=[],o=0;o<t.length;o+=1)a[o]=an(Q(n,t,o));return{c:function(){for(var n=0;n<a.length;n+=1)a[n].c();e=$()},l:function(n){for(var t=0;t<a.length;t+=1)a[t].l(n);e=$()},m:function(n,t){for(var o=0;o<a.length;o+=1)a[o].m(n,t);k(n,e,t)},p:function(n,o){if(n.is_same_date||n.Date||n.year||n.month||n.weekdays||n.weeks||n.Object||n.picked_date){t=o.weekdays.slice(o.weeks[o.week_number].length);for(var r=0;r<t.length;r+=1){var c=Q(o,t,r);a[r]?a[r].p(n,c):(a[r]=an(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d:function(n){j(a,n),n&&_(e)}}}function an(n){var e,t,a,o,r=new n.Date((new n.Date).setDate(n.weeks[n.week_number][0].getDate()-n.i)).getDate();function c(){return n.click_handler(n)}return{c:function(){e=l("td"),t=d(r),a=u(),this.h()},l:function(n){e=f(n,"TD",{class:!0},!1);var o=h(e);t=g(o,r),a=g(o,"\r\n                                    "),o.forEach(_),this.h()},h:function(){v(e,"class","date disabled svelte-6agj4j"),m(e,"today",n.is_same_date(new n.Date(n.year,n.month,1-n.i))),m(e,"picked",n.is_same_date(n.picked_date,new n.Date(n.year,n.month,1-n.i))),o=p(e,"click",c)},m:function(n,o){k(n,e,o),w(e,t),w(e,a)},p:function(a,o){n=o,a.weeks&&r!==(r=new n.Date((new n.Date).setDate(n.weeks[n.week_number][0].getDate()-n.i)).getDate())&&y(t,r),(a.is_same_date||a.Date||a.year||a.month||a.weekdays||a.weeks||a.Object)&&m(e,"today",n.is_same_date(new n.Date(n.year,n.month,1-n.i))),(a.is_same_date||a.picked_date||a.Date||a.year||a.month||a.weekdays||a.weeks||a.Object)&&m(e,"picked",n.is_same_date(n.picked_date,new n.Date(n.year,n.month,1-n.i)))},d:function(n){n&&_(e),o()}}}function on(n){for(var e,t=n.weekdays.slice(n.weeks[n.week_number].length),a=[],o=0;o<t.length;o+=1)a[o]=rn(K(n,t,o));return{c:function(){for(var n=0;n<a.length;n+=1)a[n].c();e=$()},l:function(n){for(var t=0;t<a.length;t+=1)a[t].l(n);e=$()},m:function(n,t){for(var o=0;o<a.length;o+=1)a[o].m(n,t);k(n,e,t)},p:function(n,o){if(n.is_same_date||n.day_x_next_month||n.year||n.month||n.picked_date||n.weekdays||n.weeks||n.Object){t=o.weekdays.slice(o.weeks[o.week_number].length);for(var r=0;r<t.length;r+=1){var c=K(o,t,r);a[r]?a[r].p(n,c):(a[r]=rn(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d:function(n){j(a,n),n&&_(e)}}}function rn(n){var e,t,a,o=n.i+1;function r(){return n.click_handler_2(n)}return{c:function(){e=l("td"),t=d(o),this.h()},l:function(n){e=f(n,"TD",{class:!0},!1);var a=h(e);t=g(a,o),a.forEach(_),this.h()},h:function(){v(e,"class","date disabled svelte-6agj4j"),m(e,"today",n.is_same_date(gn(n.year,n.month,n.i+1))),m(e,"picked",n.is_same_date(n.picked_date,gn(n.year,n.month,n.i+1))),a=p(e,"click",r)},m:function(n,a){k(n,e,a),w(e,t)},p:function(t,a){n=a,(t.is_same_date||t.day_x_next_month||t.year||t.month)&&m(e,"today",n.is_same_date(gn(n.year,n.month,n.i+1))),(t.is_same_date||t.picked_date||t.day_x_next_month||t.year||t.month)&&m(e,"picked",n.is_same_date(n.picked_date,gn(n.year,n.month,n.i+1)))},d:function(n){n&&_(e),a()}}}function cn(n){var e,t,a,o,r,c,s=n.date.getDate(),i=1===n.date.getDate()&&tn(n);function b(){return n.click_handler_1(n)}var x=n.date.getDate()===_n(n.date.getFullYear(),n.date.getMonth()).getDate()&&on(n);return{c:function(){i&&i.c(),e=u(),t=l("td"),a=d(s),o=u(),x&&x.c(),r=$(),this.h()},l:function(n){i&&i.l(n),e=g(n,"\r\n                            "),t=f(n,"TD",{class:!0},!1);var c=h(t);a=g(c,s),c.forEach(_),o=g(n,"\r\n                            "),x&&x.l(n),r=$(),this.h()},h:function(){v(t,"class","date svelte-6agj4j"),m(t,"picked",n.is_same_date(n.picked_date,n.date)),m(t,"today",n.is_same_date(n.date)),c=p(t,"click",b)},m:function(n,c){i&&i.m(n,c),k(n,e,c),k(n,t,c),w(t,a),k(n,o,c),x&&x.m(n,c),k(n,r,c)},p:function(o,c){1===(n=c).date.getDate()?i?i.p(o,n):((i=tn(n)).c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),o.weeks&&s!==(s=n.date.getDate())&&y(a,s),(o.is_same_date||o.picked_date||o.weeks||o.Object)&&m(t,"picked",n.is_same_date(n.picked_date,n.date)),(o.is_same_date||o.weeks||o.Object)&&m(t,"today",n.is_same_date(n.date)),n.date.getDate()===_n(n.date.getFullYear(),n.date.getMonth()).getDate()?x?x.p(o,n):((x=on(n)).c(),x.m(r.parentNode,r)):x&&(x.d(1),x=null)},d:function(n){i&&i.d(n),n&&(_(e),_(t),_(o)),x&&x.d(n),n&&_(r),c()}}}function sn(n){var e,t=(11!==n.month||"1"!==n.week_number)&&en(n);return{c:function(){e=l("tr"),t&&t.c(),this.h()},l:function(n){e=f(n,"TR",{class:!0},!1);var a=h(e);t&&t.l(a),a.forEach(_),this.h()},h:function(){v(e,"class","week svelte-6agj4j")},m:function(n,a){k(n,e,a),t&&t.m(e,null)},p:function(n,a){11!==a.month||"1"!==a.week_number?t?t.p(n,a):((t=en(a)).c(),t.m(e,null)):t&&(t.d(1),t=null)},d:function(n){n&&_(e),t&&t.d()}}}function ln(n){for(var e,t,a,o,r=n.weeks[1],c=[],s=0;s<r.length;s+=1)c[s]=fn(z(n,r,s));return{c:function(){e=l("td"),t=d("1"),a=u();for(var n=0;n<c.length;n+=1)c[n].c();o=$(),this.h()},l:function(n){e=f(n,"TD",{class:!0},!1);var r=h(e);t=g(r,"1"),r.forEach(_),a=g(n,"\r\n                ");for(var s=0;s<c.length;s+=1)c[s].l(n);o=$(),this.h()},h:function(){v(e,"class","week-number svelte-6agj4j")},m:function(n,r){k(n,e,r),w(e,t),k(n,a,r);for(var s=0;s<c.length;s+=1)c[s].m(n,r);k(n,o,r)},p:function(n,e){if(n.weeks||n.final_day_of_month||n.weekdays||n.is_same_date||n.day_x_next_month||n.year||n.month||n.picked_date){r=e.weeks[1];for(var t=0;t<r.length;t+=1){var a=z(e,r,t);c[t]?c[t].p(n,a):(c[t]=fn(a),c[t].c(),c[t].m(o.parentNode,o))}for(;t<c.length;t+=1)c[t].d(1);c.length=r.length}},d:function(n){n&&(_(e),_(a)),j(c,n),n&&_(o)}}}function un(n){for(var e,t=n.weekdays.slice(n.weeks[1].length),a=[],o=0;o<t.length;o+=1)a[o]=dn(X(n,t,o));return{c:function(){for(var n=0;n<a.length;n+=1)a[n].c();e=$()},l:function(n){for(var t=0;t<a.length;t+=1)a[t].l(n);e=$()},m:function(n,t){for(var o=0;o<a.length;o+=1)a[o].m(n,t);k(n,e,t)},p:function(n,o){if(n.is_same_date||n.day_x_next_month||n.year||n.month||n.picked_date||n.weekdays||n.weeks){t=o.weekdays.slice(o.weeks[1].length);for(var r=0;r<t.length;r+=1){var c=X(o,t,r);a[r]?a[r].p(n,c):(a[r]=dn(c),a[r].c(),a[r].m(e.parentNode,e))}for(;r<a.length;r+=1)a[r].d(1);a.length=t.length}},d:function(n){j(a,n),n&&_(e)}}}function dn(n){var e,t,a,o,r=n.i+1;function c(){return n.click_handler_4(n)}return{c:function(){e=l("td"),t=d(r),a=u(),this.h()},l:function(n){e=f(n,"TD",{class:!0},!1);var o=h(e);t=g(o,r),a=g(o,"\r\n                            "),o.forEach(_),this.h()},h:function(){v(e,"class","date disabled svelte-6agj4j"),m(e,"today",n.is_same_date(gn(n.year,n.month,n.i+1))),m(e,"picked",n.is_same_date(n.picked_date,gn(n.year,n.month,n.i+1))),o=p(e,"click",c)},m:function(n,o){k(n,e,o),w(e,t),w(e,a)},p:function(t,a){n=a,(t.is_same_date||t.day_x_next_month||t.year||t.month)&&m(e,"today",n.is_same_date(gn(n.year,n.month,n.i+1))),(t.is_same_date||t.picked_date||t.day_x_next_month||t.year||t.month)&&m(e,"picked",n.is_same_date(n.picked_date,gn(n.year,n.month,n.i+1)))},d:function(n){n&&_(e),o()}}}function fn(n){var e,t,a,o,r,c=n.date.getDate();function s(){return n.click_handler_3(n)}var i=n.date.getDate()===_n(n.date.getFullYear(),n.date.getMonth()).getDate()&&un(n);return{c:function(){e=l("td"),t=d(c),a=u(),i&&i.c(),o=$(),this.h()},l:function(n){e=f(n,"TD",{class:!0},!1);var r=h(e);t=g(r,c),r.forEach(_),a=g(n,"\r\n                    "),i&&i.l(n),o=$(),this.h()},h:function(){v(e,"class","date svelte-6agj4j"),m(e,"picked",n.is_same_date(n.picked_date,n.date)),m(e,"today",n.is_same_date(n.date)),r=p(e,"click",s)},m:function(n,r){k(n,e,r),w(e,t),k(n,a,r),i&&i.m(n,r),k(n,o,r)},p:function(a,r){n=r,a.weeks&&c!==(c=n.date.getDate())&&y(t,c),(a.is_same_date||a.picked_date||a.weeks)&&m(e,"picked",n.is_same_date(n.picked_date,n.date)),(a.is_same_date||a.weeks)&&m(e,"today",n.is_same_date(n.date)),n.date.getDate()===_n(n.date.getFullYear(),n.date.getMonth()).getDate()?i?i.p(a,n):((i=un(n)).c(),i.m(o.parentNode,o)):i&&(i.d(1),i=null)},d:function(n){n&&(_(e),_(a)),i&&i.d(n),n&&_(o),r()}}}function hn(n){for(var e,t,a,o,r,c,s,i,E,D,$,T,N,O,I,S,M,A,V,P,F,H,R,U,Y,B,L,C,J,q,G,W,X,z,K,Q,Z,en,tn,an,on,rn,cn,un,dn,fn,hn,_n,gn,vn,mn,pn,kn,wn,yn,bn,xn,En,Dn,$n,jn,Tn,Nn,On=n.months[(n.month>0?n.month-1:11)%n.months.length].substring(0,3),In=n.months[(n.month+1)%n.months.length].substring(0,3),Sn=n.Object.keys(n.weeks),Mn=[],An=0;An<Sn.length;An+=1)Mn[An]=sn(nn(n,Sn,An));var Vn=11===n.month&&ln(n);return{c:function(){e=l("div"),t=l("div"),a=l("div"),o=l("span"),r=d("‹"),c=u(),s=l("span"),i=d(On),E=u(),D=l("span"),$=d(n.month_string),T=u(),N=d(n.year),O=u(),I=l("div"),S=l("span"),M=d(In),A=u(),V=l("span"),P=d("›"),F=u(),H=l("table"),R=l("thead"),U=l("tr"),Y=l("th"),B=d("#"),L=u(),C=l("th"),J=d("Mon"),q=u(),G=l("th"),W=d("Tue"),X=u(),z=l("th"),K=d("Wed"),Q=u(),Z=l("th"),en=d("Thu"),tn=u(),an=l("th"),on=d("Fri"),rn=u(),cn=l("th"),un=d("Sat"),dn=u(),fn=l("th"),hn=d("Sun"),_n=u(),gn=l("tbody");for(var f=0;f<Mn.length;f+=1)Mn[f].c();vn=u(),Vn&&Vn.c(),mn=u(),pn=l("div"),kn=l("button"),wn=d("×"),yn=u(),bn=l("div"),xn=l("input"),En=d("\r\n            :\r\n            "),Dn=l("input"),$n=u(),jn=l("button"),Tn=d("✓"),this.h()},l:function(l){e=f(l,"DIV",{class:!0},!1);var u=h(e);t=f(u,"DIV",{class:!0},!1);var d=h(t);a=f(d,"DIV",{class:!0},!1);var v=h(a);o=f(v,"SPAN",{class:!0},!1);var m=h(o);r=g(m,"‹"),m.forEach(_),c=g(v,"\r\n            "),s=f(v,"SPAN",{class:!0},!1);var p=h(s);i=g(p,On),p.forEach(_),v.forEach(_),E=g(d,"\r\n        "),D=f(d,"SPAN",{class:!0},!1);var k=h(D);$=g(k,n.month_string),T=g(k," "),N=g(k,n.year),k.forEach(_),O=g(d,"\r\n        "),I=f(d,"DIV",{class:!0},!1);var w=h(I);S=f(w,"SPAN",{class:!0},!1);var y=h(S);M=g(y,In),y.forEach(_),A=g(w,"\r\n            "),V=f(w,"SPAN",{class:!0},!1);var b=h(V);P=g(b,"›"),b.forEach(_),w.forEach(_),d.forEach(_),F=g(u,"\r\n    "),H=f(u,"TABLE",{class:!0},!1);var x=h(H);R=f(x,"THEAD",{class:!0},!1);var j=h(R);U=f(j,"TR",{class:!0},!1);var nn=h(U);Y=f(nn,"TH",{class:!0},!1);var sn=h(Y);B=g(sn,"#"),sn.forEach(_),L=g(nn,"\r\n                "),C=f(nn,"TH",{class:!0},!1);var ln=h(C);J=g(ln,"Mon"),ln.forEach(_),q=g(nn,"\r\n                "),G=f(nn,"TH",{class:!0},!1);var Nn=h(G);W=g(Nn,"Tue"),Nn.forEach(_),X=g(nn,"\r\n                "),z=f(nn,"TH",{class:!0},!1);var Sn=h(z);K=g(Sn,"Wed"),Sn.forEach(_),Q=g(nn,"\r\n                "),Z=f(nn,"TH",{class:!0},!1);var An=h(Z);en=g(An,"Thu"),An.forEach(_),tn=g(nn,"\r\n                "),an=f(nn,"TH",{class:!0},!1);var Pn=h(an);on=g(Pn,"Fri"),Pn.forEach(_),rn=g(nn,"\r\n                "),cn=f(nn,"TH",{class:!0},!1);var Fn=h(cn);un=g(Fn,"Sat"),Fn.forEach(_),dn=g(nn,"\r\n                "),fn=f(nn,"TH",{class:!0},!1);var Hn=h(fn);hn=g(Hn,"Sun"),Hn.forEach(_),nn.forEach(_),j.forEach(_),_n=g(x,"\r\n        "),gn=f(x,"TBODY",{class:!0},!1);for(var Rn=h(gn),Un=0;Un<Mn.length;Un+=1)Mn[Un].l(Rn);vn=g(Rn,"\r\n            "),Vn&&Vn.l(Rn),Rn.forEach(_),x.forEach(_),mn=g(u,"\r\n    "),pn=f(u,"DIV",{class:!0},!1);var Yn=h(pn);kn=f(Yn,"BUTTON",{class:!0},!1);var Bn=h(kn);wn=g(Bn,"×"),Bn.forEach(_),yn=g(Yn,"\r\n        "),bn=f(Yn,"DIV",{class:!0},!1);var Ln=h(bn);xn=f(Ln,"INPUT",{type:!0,class:!0,placeholder:!0},!1),h(xn).forEach(_),En=g(Ln,"\r\n            :\r\n            "),Dn=f(Ln,"INPUT",{type:!0,class:!0,placeholder:!0},!1),h(Dn).forEach(_),Ln.forEach(_),$n=g(Yn,"\r\n        "),jn=f(Yn,"BUTTON",{class:!0},!1);var Cn=h(jn);Tn=g(Cn,"✓"),Cn.forEach(_),Yn.forEach(_),u.forEach(_),this.h()},h:function(){v(o,"class","chevron svelte-6agj4j"),v(s,"class","month svelte-6agj4j"),v(a,"class","prev svelte-6agj4j"),v(D,"class","current-month"),v(S,"class","month svelte-6agj4j"),v(V,"class","chevron svelte-6agj4j"),v(I,"class","next svelte-6agj4j"),v(t,"class","header svelte-6agj4j"),v(Y,"class","svelte-6agj4j"),v(C,"class","svelte-6agj4j"),v(G,"class","svelte-6agj4j"),v(z,"class","svelte-6agj4j"),v(Z,"class","svelte-6agj4j"),v(an,"class","svelte-6agj4j"),v(cn,"class","svelte-6agj4j"),v(fn,"class","svelte-6agj4j"),v(U,"class","svelte-6agj4j"),v(R,"class","svelte-6agj4j"),v(gn,"class","svelte-6agj4j"),v(H,"class","svelte-6agj4j"),v(kn,"class","footer-btn cancel svelte-6agj4j"),v(xn,"type","text"),v(xn,"class","numerical svelte-6agj4j"),v(xn,"placeholder","12"),v(Dn,"type","text"),v(Dn,"class","numerical svelte-6agj4j"),v(Dn,"placeholder","48"),v(bn,"class","timepicker svelte-6agj4j"),v(jn,"class","footer-btn submit svelte-6agj4j"),m(jn,"disabled",""===n.hours||""===n.minutes||!n.picked_date),v(pn,"class","footer svelte-6agj4j"),v(e,"class","datepicker svelte-6agj4j"),Nn=[p(a,"click",n.dec_month),p(I,"click",n.inc_month),p(kn,"click",n.cancel),p(xn,"input",n.input0_input_handler),p(Dn,"input",n.input1_input_handler),p(jn,"click",n.submit_date)]},m:function(l,u){k(l,e,u),w(e,t),w(t,a),w(a,o),w(o,r),w(a,c),w(a,s),w(s,i),w(t,E),w(t,D),w(D,$),w(D,T),w(D,N),w(t,O),w(t,I),w(I,S),w(S,M),w(I,A),w(I,V),w(V,P),w(e,F),w(e,H),w(H,R),w(R,U),w(U,Y),w(Y,B),w(U,L),w(U,C),w(C,J),w(U,q),w(U,G),w(G,W),w(U,X),w(U,z),w(z,K),w(U,Q),w(U,Z),w(Z,en),w(U,tn),w(U,an),w(an,on),w(U,rn),w(U,cn),w(cn,un),w(U,dn),w(U,fn),w(fn,hn),w(H,_n),w(H,gn);for(var d=0;d<Mn.length;d+=1)Mn[d].m(gn,null);w(gn,vn),Vn&&Vn.m(gn,null),w(e,mn),w(e,pn),w(pn,kn),w(kn,wn),w(pn,yn),w(pn,bn),w(bn,xn),xn.value=n.hours,w(bn,En),w(bn,Dn),Dn.value=n.minutes,w(pn,$n),w(pn,jn),w(jn,Tn)},p:function(n,e){if(n.month&&On!==(On=e.months[(e.month>0?e.month-1:11)%e.months.length].substring(0,3))&&y(i,On),n.month_string&&y($,e.month_string),n.year&&y(N,e.year),n.month&&In!==(In=e.months[(e.month+1)%e.months.length].substring(0,3))&&y(M,In),n.month||n.Object||n.weeks||n.final_day_of_month||n.weekdays||n.is_same_date||n.day_x_next_month||n.year||n.picked_date||n.Date){Sn=e.Object.keys(e.weeks);for(var t=0;t<Sn.length;t+=1){var a=nn(e,Sn,t);Mn[t]?Mn[t].p(n,a):(Mn[t]=sn(a),Mn[t].c(),Mn[t].m(gn,vn))}for(;t<Mn.length;t+=1)Mn[t].d(1);Mn.length=Sn.length}11===e.month?Vn?Vn.p(n,e):((Vn=ln(e)).c(),Vn.m(gn,null)):Vn&&(Vn.d(1),Vn=null),n.hours&&xn.value!==e.hours&&(xn.value=e.hours),n.minutes&&Dn.value!==e.minutes&&(Dn.value=e.minutes),(n.hours||n.minutes||n.picked_date)&&m(jn,"disabled",""===e.hours||""===e.minutes||!e.picked_date)},i:b,o:b,d:function(n){n&&_(e),j(Mn,n),Vn&&Vn.d(),x(Nn)}}}function _n(n,e){return new Date(n,e+1,0)}function gn(n,e,t){return e+=1,new Date(n,e,t)}function vn(n,e,t){var a,o=e.month,r=void 0===o?(new Date).getMonth():o,c=e.year,s=void 0===c?(new Date).getFullYear():c,i=E(),l=new Date,u=["January","February","March","April","May","June","July","August","September","October","November","December"],d="",f="";var h,_,g={};return n.$set=function(n){"month"in n&&t("month",r=n.month),"year"in n&&t("year",s=n.year)},n.$$.update=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{month:1,year:1,this_month_days:1,weeks:1};(n.month||n.year)&&t("this_month_days",h=function(n,e){for(var t=new Date(e,n,1),a=[];t.getMonth()===n;)a.push(new Date(t)),t.setDate(t.getDate()+1);return a}(r,s)),n.month&&t("month_string",_=u[r%u.length]),(n.this_month_days||n.weeks)&&(t("weeks",g={}),h.forEach(function(n){var e="".concat(n.getWeek());Object.keys(g).includes(e)||(g[e]=[],t("weeks",g),t("this_month_days",h),t("month",r),t("year",s)),g[e].push(n)}))},{month:r,year:s,weekdays:[7,6,5,4,3,2,1],months:u,picked_date:a,hours:d,minutes:f,dec_month:function(){t("month",r-=1),r<0&&(t("month",r=11),t("year",--s))},inc_month:function(){t("month",r+=1),r>11&&(t("month",r=0),t("year",++s))},is_same_date:function(n,e){return!!n&&(e=e||l,n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate())},submit_date:function(){""!==d&&""!==f&&a&&(a.setHours(parseInt(d),parseInt(f)),i("date",{date:a}))},cancel:function(){i("cancel")},weeks:g,Date:Date,month_string:_,Object:Object,click_handler:function(n){var e=n.i,o=a=new Date(s,r,1-e);return t("picked_date",a),o},click_handler_1:function(n){var e=n.date,o=a=e;return t("picked_date",a),o},click_handler_2:function(n){var e=n.i,o=a=gn(s,r,e+1);return t("picked_date",a),o},click_handler_3:function(n){var e=n.date,o=a=e;return t("picked_date",a),o},click_handler_4:function(n){var e=n.i,o=a=gn(s,r,e+1);return t("picked_date",a),o},input0_input_handler:function(){d=this.value,t("hours",d)},input1_input_handler:function(){f=this.value,t("minutes",f)}}}var mn=function(n){function l(n){var e;return t(this,l),e=a(this,o(l).call(this)),r(s(e),n,vn,hn,c,["month","year"]),e}return e(l,i),l}();function pn(n){var e,t,a,o,r,c,s,i,b,E,D,$,j,V=n.$$slots.default,P=T(V,n,null);return{c:function(){e=l("div"),t=l("div"),a=l("div"),o=l("span"),r=d(n.title),c=u(),s=l("span"),i=l("i"),b=u(),E=l("div"),P&&P.c(),this.h()},l:function(l){e=f(l,"DIV",{class:!0,display:!0},!1);var u=h(e);t=f(u,"DIV",{class:!0},!1);var d=h(t);a=f(d,"DIV",{class:!0,style:!0},!1);var v=h(a);o=f(v,"SPAN",{class:!0},!1);var m=h(o);r=g(m,n.title),m.forEach(_),c=g(v,"\r\n            "),s=f(v,"SPAN",{class:!0},!1);var p=h(s);i=f(p,"I",{class:!0},!1),h(i).forEach(_),p.forEach(_),v.forEach(_),b=g(d,"\r\n        "),E=f(d,"DIV",{class:!0},!1);var k=h(E);P&&P.l(k),k.forEach(_),d.forEach(_),u.forEach(_),this.h()},h:function(){v(o,"class","title"),v(i,"class","fas fa-close svelte-me2b3v"),v(s,"class","close-btn"),v(a,"class","modal-title svelte-me2b3v"),N(a,"background-color",n.color),v(E,"class","modal-content svelte-me2b3v"),v(t,"class","modal-inner svelte-me2b3v"),v(e,"class","modal-wrapper svelte-me2b3v"),v(e,"display",D="width: "+("auto"===n.width?n.width:"$[width}px")),m(e,"hidden",!n.show),j=[p(i,"click",n.hide_modal),p(e,"click",n.wrapper_click)]},m:function(l,u){k(l,e,u),w(e,t),w(t,a),w(a,o),w(o,r),w(a,c),w(a,s),w(s,i),w(t,b),w(t,E),P&&P.m(E,null),O(function(){return n.div3_binding(e,null)}),$=!0},p:function(n,t){$&&!n.title||y(r,t.title),$&&!n.color||N(a,"background-color",t.color),P&&P.p&&n.$$scope&&P.p(I(V,t,n,null),S(V,t,null)),n.items&&(t.div3_binding(null,e),t.div3_binding(e,null)),$&&!n.width||D===(D="width: "+("auto"===t.width?t.width:"$[width}px"))||v(e,"display",D),n.show&&m(e,"hidden",!t.show)},i:function(n){$||(M(P,n),$=!0)},o:function(n){A(P,n),$=!1},d:function(t){t&&_(e),P&&P.d(t),n.div3_binding(null,e),x(j)}}}function kn(n,e,t){var a,o=E(),r=e.title,c=void 0===r?"Modal":r,s=e.color,i=void 0===s?"#689dc0":s,l=e.show,u=void 0!==l&&l,d=e.width,f=void 0===d?"auto":d;function h(){t("show",u=!1),o("hide")}document.onkeydown=function(n){"Escape"===n.key&&u&&t("show",u=!1)};var _=e.$$slots,g=void 0===_?{}:_,v=e.$$scope;return n.$set=function(n){"title"in n&&t("title",c=n.title),"color"in n&&t("color",i=n.color),"show"in n&&t("show",u=n.show),"width"in n&&t("width",f=n.width),"$$scope"in n&&t("$$scope",v=n.$$scope)},{title:c,color:i,show:u,width:f,modal_binding:a,wrapper_click:function(n){n.target===a&&h()},hide_modal:h,div3_binding:function(n,e){t("modal_binding",a=n)},$$slots:g,$$scope:v}}var wn=function(n){function l(n){var e;return t(this,l),e=a(this,o(l).call(this)),r(s(e),n,kn,pn,c,["title","color","show","width"]),e}return e(l,i),l}();function yn(n){return n<9?"0".concat(n):"".concat(n)}function bn(n,e,t){var a=Object.create(n);return a.key=e[t],a}function xn(n,e,t){var a=Object.create(n);return a.counter=e[t],a.index=t,a}function En(n,e,t){var a=Object.create(n);return a.key=e[t],a}function Dn(n){var e,t,a,o=Object.keys(n.sorting).includes(n.key)&&$n(n);function r(n){return Object.keys(n.aliases).includes(n.key)?Sn:In}var c=r(n),s=c(n);function i(){return n.click_handler(n)}return{c:function(){e=l("th"),o&&o.c(),t=u(),s.c(),this.h()},l:function(n){e=f(n,"TH",{class:!0},!1);var a=h(e);o&&o.l(a),t=g(a,"\r\n                        "),s.l(a),a.forEach(_),this.h()},h:function(){v(e,"class","svelte-mf5tkw"),m(e,"sortable",Object.keys(n.sorting).includes(n.key)),a=p(e,"click",i)},m:function(n,a){k(n,e,a),o&&o.m(e,null),w(e,t),s.m(e,null)},p:function(a,i){n=i,Object.keys(n.sorting).includes(n.key)?o?o.p(a,n):((o=$n(n)).c(),o.m(e,t)):o&&(o.d(1),o=null),c===(c=r(n))&&s?s.p(a,n):(s.d(1),(s=c(n))&&(s.c(),s.m(e,null))),(a.sorting||a.counters)&&m(e,"sortable",Object.keys(n.sorting).includes(n.key))},d:function(n){n&&_(e),o&&o.d(),s.d(),a()}}}function $n(n){var e;function t(n){return n.key===n.sortby?Tn:jn}var a=t(n),o=a(n);return{c:function(){o.c(),e=$()},l:function(n){o.l(n),e=$()},m:function(n,t){o.m(n,t),k(n,e,t)},p:function(n,r){a===(a=t(r))&&o?o.p(n,r):(o.d(1),(o=a(r))&&(o.c(),o.m(e.parentNode,e)))},d:function(n){o.d(n),n&&_(e)}}}function jn(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort svelte-mf5tkw")},m:function(n,t){k(n,e,t)},p:b,d:function(n){n&&_(e)}}}function Tn(n){var e;function t(n){return n.ascending?On:Nn}var a=t(n),o=a(n);return{c:function(){o.c(),e=$()},l:function(n){o.l(n),e=$()},m:function(n,t){o.m(n,t),k(n,e,t)},p:function(n,r){a!==(a=t(r))&&(o.d(1),(o=a(r))&&(o.c(),o.m(e.parentNode,e)))},d:function(n){o.d(n),n&&_(e)}}}function Nn(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort-down svelte-mf5tkw")},m:function(n,t){k(n,e,t)},d:function(n){n&&_(e)}}}function On(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort-up svelte-mf5tkw")},m:function(n,t){k(n,e,t)},d:function(n){n&&_(e)}}}function In(n){var e,t=n.key;return{c:function(){e=d(t)},l:function(n){e=g(n,t)},m:function(n,t){k(n,e,t)},p:function(n,a){n.counters&&t!==(t=a.key)&&y(e,t)},d:function(n){n&&_(e)}}}function Sn(n){var e,t=n.aliases[n.key];return{c:function(){e=d(t)},l:function(n){e=g(n,t)},m:function(n,t){k(n,e,t)},p:function(n,a){(n.aliases||n.counters)&&t!==(t=a.aliases[a.key])&&y(e,t)},d:function(n){n&&_(e)}}}function Mn(n){var e,t=!n.exclude.includes(n.key)&&Dn(n);return{c:function(){t&&t.c(),e=$()},l:function(n){t&&t.l(n),e=$()},m:function(n,a){t&&t.m(n,a),k(n,e,a)},p:function(n,a){a.exclude.includes(a.key)?t&&(t.d(1),t=null):t?t.p(n,a):((t=Dn(a)).c(),t.m(e.parentNode,e))},d:function(n){t&&t.d(n),n&&_(e)}}}function An(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort svelte-mf5tkw")},m:function(n,t){k(n,e,t)},p:b,d:function(n){n&&_(e)}}}function Vn(n){var e;function t(n){return n.ascending?Fn:Pn}var a=t(n),o=a(n);return{c:function(){o.c(),e=$()},l:function(n){o.l(n),e=$()},m:function(n,t){o.m(n,t),k(n,e,t)},p:function(n,r){a!==(a=t(r))&&(o.d(1),(o=a(r))&&(o.c(),o.m(e.parentNode,e)))},d:function(n){o.d(n),n&&_(e)}}}function Pn(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort-down svelte-mf5tkw")},m:function(n,t){k(n,e,t)},d:function(n){n&&_(e)}}}function Fn(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort-up svelte-mf5tkw")},m:function(n,t){k(n,e,t)},d:function(n){n&&_(e)}}}function Hn(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort svelte-mf5tkw")},m:function(n,t){k(n,e,t)},p:b,d:function(n){n&&_(e)}}}function Rn(n){var e;function t(n){return n.ascending?Yn:Un}var a=t(n),o=a(n);return{c:function(){o.c(),e=$()},l:function(n){o.l(n),e=$()},m:function(n,t){o.m(n,t),k(n,e,t)},p:function(n,r){a!==(a=t(r))&&(o.d(1),(o=a(r))&&(o.c(),o.m(e.parentNode,e)))},d:function(n){o.d(n),n&&_(e)}}}function Un(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort-down svelte-mf5tkw")},m:function(n,t){k(n,e,t)},d:function(n){n&&_(e)}}}function Yn(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-sort-up svelte-mf5tkw")},m:function(n,t){k(n,e,t)},d:function(n){n&&_(e)}}}function Bn(n){for(var e,t,a,o,r,c,s,i,m,y,b,x,E,D,$,T=Object.keys(n.counter),N=[],O=0;O<T.length;O+=1)N[O]=Cn(bn(n,T,O));function I(n){return n.counter.days_since_last_crossing?n.counter.days_since_last_crossing>=n.threshold?qn:Jn:Gn}var S=I(n),F=S(n);var H=new G({props:{ignored:n.counter.ignored}});function R(){return n.click_handler_3(n)}return H.$on("toggle",function(){return n.toggle_handler(n)}),{c:function(){e=l("tr");for(var n=0;n<N.length;n+=1)N[n].c();t=u(),a=l("td"),F.c(),o=u(),r=l("td"),H.$$.fragment.c(),c=u(),s=l("td"),i=l("button"),m=l("i"),y=u(),b=l("span"),x=d("Register shoveling"),E=u(),this.h()},l:function(n){e=f(n,"TR",{class:!0},!1);for(var l=h(e),u=0;u<N.length;u+=1)N[u].l(l);t=g(l,"\r\n                    "),a=f(l,"TD",{class:!0},!1);var d=h(a);F.l(d),d.forEach(_),o=g(l,"\r\n                    "),r=f(l,"TD",{class:!0},!1);var v=h(r);H.$$.fragment.l(v),v.forEach(_),c=g(l,"\r\n                    "),s=f(l,"TD",{class:!0},!1);var p=h(s);i=f(p,"BUTTON",{class:!0},!1);var k=h(i);m=f(k,"I",{class:!0},!1),h(m).forEach(_),y=g(k,"\r\n                            "),b=f(k,"SPAN",{class:!0},!1);var w=h(b);x=g(w,"Register shoveling"),w.forEach(_),k.forEach(_),p.forEach(_),E=g(l,"\r\n                "),l.forEach(_),this.h()},h:function(){v(a,"class","svelte-mf5tkw"),v(r,"class","svelte-mf5tkw"),v(m,"class","fas fa-clipboard-check svelte-mf5tkw"),v(b,"class","svelte-mf5tkw"),v(i,"class","shoveling-btn svelte-mf5tkw"),v(s,"class","svelte-mf5tkw"),v(e,"class","svelte-mf5tkw"),$=p(i,"click",R)},m:function(n,l){k(n,e,l);for(var u=0;u<N.length;u+=1)N[u].m(e,null);w(e,t),w(e,a),F.m(a,null),w(e,o),w(e,r),V(H,r,null),w(e,c),w(e,s),w(s,i),w(i,m),w(i,y),w(i,b),w(b,x),w(e,E),D=!0},p:function(o,r){if(n=r,o.exclude||o.filtered_reports){T=Object.keys(n.counter);for(var c=0;c<T.length;c+=1){var s=bn(n,T,c);N[c]?N[c].p(o,s):(N[c]=Cn(s),N[c].c(),N[c].m(e,t))}for(;c<N.length;c+=1)N[c].d(1);N.length=T.length}S===(S=I(n))&&F?F.p(o,n):(F.d(1),(F=S(n))&&(F.c(),F.m(a,null)));var i={};o.filtered_reports&&(i.ignored=n.counter.ignored),H.$set(i)},i:function(n){D||(M(H.$$.fragment,n),D=!0)},o:function(n){A(H.$$.fragment,n),D=!1},d:function(n){n&&_(e),j(N,n),F.d(),P(H),$()}}}function Ln(n){var e,t,a=n.counter[n.key];return{c:function(){e=l("td"),t=d(a),this.h()},l:function(n){e=f(n,"TD",{class:!0},!1);var o=h(e);t=g(o,a),o.forEach(_),this.h()},h:function(){v(e,"class","svelte-mf5tkw")},m:function(n,a){k(n,e,a),w(e,t)},p:function(n,e){n.filtered_reports&&a!==(a=e.counter[e.key])&&y(t,a)},d:function(n){n&&_(e)}}}function Cn(n){var e,t=!n.exclude.includes(n.key)&&Ln(n);return{c:function(){t&&t.c(),e=$()},l:function(n){t&&t.l(n),e=$()},m:function(n,a){t&&t.m(n,a),k(n,e,a)},p:function(n,a){a.exclude.includes(a.key)?t&&(t.d(1),t=null):t?t.p(n,a):((t=Ln(a)).c(),t.m(e.parentNode,e))},d:function(n){t&&t.d(n),n&&_(e)}}}function Jn(n){var e,t,a=n.counter.days_since_last_crossing;return{c:function(){e=d(a),t=d(" days ago")},l:function(n){e=g(n,a),t=g(n," days ago")},m:function(n,a){k(n,e,a),k(n,t,a)},p:function(n,t){n.filtered_reports&&a!==(a=t.counter.days_since_last_crossing)&&y(e,a)},d:function(n){n&&(_(e),_(t))}}}function qn(n){var e,t,a,o=n.counter.days_since_last_crossing;return{c:function(){e=l("div"),t=d(o),a=d(" days ago"),this.h()},l:function(n){e=f(n,"DIV",{class:!0},!1);var r=h(e);t=g(r,o),a=g(r," days ago"),r.forEach(_),this.h()},h:function(){v(e,"class","no-last-crossing svelte-mf5tkw")},m:function(n,o){k(n,e,o),w(e,t),w(e,a)},p:function(n,e){n.filtered_reports&&o!==(o=e.counter.days_since_last_crossing)&&y(t,o)},d:function(n){n&&_(e)}}}function Gn(n){var e,t;return{c:function(){e=l("div"),t=d("NOT CROSSED"),this.h()},l:function(n){e=f(n,"DIV",{class:!0},!1);var a=h(e);t=g(a,"NOT CROSSED"),a.forEach(_),this.h()},h:function(){v(e,"class","no-last-crossing svelte-mf5tkw")},m:function(n,a){k(n,e,a),w(e,t)},p:b,d:function(n){n&&_(e)}}}function Wn(n){var e,t,a=n.index>=n.page_index*n.maxlen&&n.index<=n.page_index*n.maxlen+n.maxlen&&Bn(n);return{c:function(){a&&a.c(),e=$()},l:function(n){a&&a.l(n),e=$()},m:function(n,o){a&&a.m(n,o),k(n,e,o),t=!0},p:function(n,t){t.index>=t.page_index*t.maxlen&&t.index<=t.page_index*t.maxlen+t.maxlen?a?(a.p(n,t),M(a,1)):((a=Bn(t)).c(),M(a,1),a.m(e.parentNode,e)):a&&(F(),A(a,1,function(){a=null}),H())},i:function(n){t||(M(a),t=!0)},o:function(n){A(a),t=!1},d:function(n){a&&a.d(n),n&&_(e)}}}function Xn(n){var e,t,a,o,r,c=n.shoveling_date?"".concat(C.months[n.shoveling_date.getMonth()]," ").concat(yn(n.shoveling_date.getDate())," ").concat(n.shoveling_date.getFullYear()," ").concat(yn(n.shoveling_date.getHours()),":").concat(yn(n.shoveling_date.getMinutes())):"Submit",s=new mn({});return s.$on("date",n.date_handler),s.$on("cancel",n.cancel_handler),{c:function(){s.$$.fragment.c(),e=u(),t=l("button"),a=d(c),this.h()},l:function(n){s.$$.fragment.l(n),e=g(n,"\r\n    "),t=f(n,"BUTTON",{class:!0},!1);var o=h(t);a=g(o,c),o.forEach(_),this.h()},h:function(){v(t,"class","submit-shoveling svelte-mf5tkw"),m(t,"disabled",!n.shoveling_date),r=p(t,"click",n.shoveling_submit)},m:function(n,r){V(s,n,r),k(n,e,r),k(n,t,r),w(t,a),o=!0},p:function(n,e){o&&!n.shoveling_date||c===(c=e.shoveling_date?"".concat(C.months[e.shoveling_date.getMonth()]," ").concat(yn(e.shoveling_date.getDate())," ").concat(e.shoveling_date.getFullYear()," ").concat(yn(e.shoveling_date.getHours()),":").concat(yn(e.shoveling_date.getMinutes())):"Submit")||y(a,c),n.shoveling_date&&m(t,"disabled",!e.shoveling_date)},i:function(n){o||(M(s.$$.fragment,n),o=!0)},o:function(n){A(s.$$.fragment,n),o=!1},d:function(n){P(s,n),n&&(_(e),_(t)),r()}}}function zn(n){for(var e,t,a,o,r,c,s,i,b,E,D,$,T,O,I,S,R,U,Y,B,L,C,J,q,G,W,X,z,K,Q,Z,nn,en,tn,an=n.page_index+1,on=n.last_page+1,rn=Object.keys(n.counters[0]),cn=[],sn=0;sn<rn.length;sn+=1)cn[sn]=Mn(En(n,rn,sn));function ln(n){return"days_since_last_crossing"===n.sortby?Vn:An}var un=ln(n),dn=un(n);function fn(n){return"ignored"===n.sortby?Rn:Hn}var hn=fn(n),_n=hn(n),gn=n.filtered_reports,vn=[];for(sn=0;sn<gn.length;sn+=1)vn[sn]=Wn(xn(n,gn,sn));var mn=function(n){return A(vn[n],1,function(){vn[n]=null})},pn=new wn({props:{title:"register shoveling",show:n.show_modal,$$slots:{default:[Xn]},$$scope:{ctx:n}}});return pn.$on("hide",n.hide_handler),{c:function(){e=l("table"),t=l("thead"),a=l("tr");for(var n=0;n<cn.length;n+=1)cn[n].c();o=u(),r=l("th"),dn.c(),c=d("\r\n                last crossing"),s=u(),i=l("th"),_n.c(),b=d("\r\n                ignored"),E=u(),D=l("th"),$=d("ignore"),T=u(),O=l("th"),I=d("shoveling"),S=u(),R=l("tbody");for(n=0;n<vn.length;n+=1)vn[n].c();U=u(),Y=l("div"),B=l("div"),L=l("button"),C=d("prev"),J=u(),q=l("span"),G=d("Page "),W=d(an),X=d(" of "),z=d(on),K=u(),Q=l("button"),Z=d("next"),nn=u(),pn.$$.fragment.c(),this.h()},l:function(n){e=f(n,"TABLE",{class:!0},!1);var l=h(e);t=f(l,"THEAD",{class:!0},!1);var u=h(t);a=f(u,"TR",{},!1);for(var d=h(a),v=0;v<cn.length;v+=1)cn[v].l(d);o=g(d,"\r\n            "),r=f(d,"TH",{style:!0,class:!0},!1);var m=h(r);dn.l(m),c=g(m,"\r\n                last crossing"),m.forEach(_),s=g(d,"\r\n            "),i=f(d,"TH",{style:!0,class:!0},!1);var p=h(i);_n.l(p),b=g(p,"\r\n                ignored"),p.forEach(_),E=g(d,"\r\n            "),D=f(d,"TH",{style:!0,class:!0},!1);var k=h(D);$=g(k,"ignore"),k.forEach(_),T=g(d,"\r\n            "),O=f(d,"TH",{style:!0,class:!0},!1);var w=h(O);I=g(w,"shoveling"),w.forEach(_),d.forEach(_),u.forEach(_),S=g(l,"\r\n    "),R=f(l,"TBODY",{class:!0},!1);var y=h(R);for(v=0;v<vn.length;v+=1)vn[v].l(y);y.forEach(_),l.forEach(_),U=g(n,"\r\n\r\n"),Y=f(n,"DIV",{class:!0},!1);var x=h(Y);B=f(x,"DIV",{class:!0},!1);var j=h(B);L=f(j,"BUTTON",{class:!0},!1);var N=h(L);C=g(N,"prev"),N.forEach(_),J=g(j,"\r\n        "),q=f(j,"SPAN",{class:!0},!1);var M=h(q);G=g(M,"Page "),W=g(M,an),X=g(M," of "),z=g(M,on),M.forEach(_),K=g(j,"\r\n        "),Q=f(j,"BUTTON",{class:!0},!1);var A=h(Q);Z=g(A,"next"),A.forEach(_),j.forEach(_),x.forEach(_),nn=g(n,"\r\n\r\n"),pn.$$.fragment.l(n),this.h()},h:function(){N(r,"width","175px"),v(r,"class","svelte-mf5tkw"),m(r,"sortable",Object.keys(n.sorting).includes("days_since_last_crossing")),N(i,"width","175px"),v(i,"class","svelte-mf5tkw"),m(i,"sortable",Object.keys(n.sorting).includes("ignored")),N(D,"width","175px"),v(D,"class","svelte-mf5tkw"),N(O,"width","250px"),v(O,"class","svelte-mf5tkw"),v(t,"class","svelte-mf5tkw"),v(R,"class","svelte-mf5tkw"),v(e,"class","svelte-mf5tkw"),v(L,"class","svelte-mf5tkw"),m(L,"disabled",n.page_index<=0),v(q,"class","svelte-mf5tkw"),v(Q,"class","svelte-mf5tkw"),m(Q,"disabled",n.page_index>=n.last_page),v(B,"class","center-wrap svelte-mf5tkw"),v(Y,"class","table-nav svelte-mf5tkw"),tn=[p(r,"click",n.click_handler_1),p(i,"click",n.click_handler_2),p(L,"click",n.prev),p(Q,"click",n.next)]},m:function(n,l){k(n,e,l),w(e,t),w(t,a);for(var u=0;u<cn.length;u+=1)cn[u].m(a,null);w(a,o),w(a,r),dn.m(r,null),w(r,c),w(a,s),w(a,i),_n.m(i,null),w(i,b),w(a,E),w(a,D),w(D,$),w(a,T),w(a,O),w(O,I),w(e,S),w(e,R);for(u=0;u<vn.length;u+=1)vn[u].m(R,null);k(n,U,l),k(n,Y,l),w(Y,B),w(B,L),w(L,C),w(B,J),w(B,q),w(q,G),w(q,W),w(q,X),w(q,z),w(B,K),w(B,Q),w(Q,Z),k(n,nn,l),V(pn,n,l),en=!0},p:function(n,e){if(n.exclude||n.counters||n.sorting||n.aliases||n.sortby||n.ascending){rn=Object.keys(e.counters[0]);for(var t=0;t<rn.length;t+=1){var s=En(e,rn,t);cn[t]?cn[t].p(n,s):(cn[t]=Mn(s),cn[t].c(),cn[t].m(a,o))}for(;t<cn.length;t+=1)cn[t].d(1);cn.length=rn.length}if(un===(un=ln(e))&&dn?dn.p(n,e):(dn.d(1),(dn=un(e))&&(dn.c(),dn.m(r,c))),n.sorting&&m(r,"sortable",Object.keys(e.sorting).includes("days_since_last_crossing")),hn===(hn=fn(e))&&_n?_n.p(n,e):(_n.d(1),(_n=hn(e))&&(_n.c(),_n.m(i,b))),n.sorting&&m(i,"sortable",Object.keys(e.sorting).includes("ignored")),n.page_index||n.maxlen||n.filtered_reports||n.threshold||n.exclude){gn=e.filtered_reports;for(t=0;t<gn.length;t+=1){var l=xn(e,gn,t);vn[t]?(vn[t].p(n,l),M(vn[t],1)):(vn[t]=Wn(l),vn[t].c(),M(vn[t],1),vn[t].m(R,null))}for(F(),t=gn.length;t<vn.length;t+=1)mn(t);H()}n.page_index&&m(L,"disabled",e.page_index<=0),en&&!n.page_index||an===(an=e.page_index+1)||y(W,an),en&&!n.last_page||on===(on=e.last_page+1)||y(z,on),(n.page_index||n.last_page)&&m(Q,"disabled",e.page_index>=e.last_page);var u={};n.show_modal&&(u.show=e.show_modal),(n.$$scope||n.shoveling_date)&&(u.$$scope={changed:n,ctx:e}),pn.$set(u)},i:function(n){if(!en){for(var e=0;e<gn.length;e+=1)M(vn[e]);M(pn.$$.fragment,n),en=!0}},o:function(n){vn=vn.filter(Boolean);for(var e=0;e<vn.length;e+=1)A(vn[e]);A(pn.$$.fragment,n),en=!1},d:function(n){n&&_(e),j(cn,n),dn.d(),_n.d(),j(vn,n),n&&(_(U),_(Y),_(nn)),P(pn,n),x(tn)}}}function Kn(n,e,t){var a;R(n,L,function(n){t("$axle_query",a=n)});var o,r,c,s,i=e.counters,l=void 0===i?[]:i,u=e.exclude,d=void 0===u?[]:u,f=e.sorting,h=void 0===f?{}:f,_=e.threshold,g=void 0===_?25:_,v=e.aliases,m=void 0===v?{}:v,p=e.ascending,k=void 0!==p&&p,w=e.sortby,y=void 0===w?h[0]:w,b=!1,x=0,E=Math.max(Math.floor((window.innerHeight-400)/36)+1,5);function D(n){n!==y?(t("ascending",k=!0),t("sortby",y=n)):t("ascending",k=!k)}function $(n){r=n,t("show_modal",b=!0)}return window.onresize=function(n){t("maxlen",E=Math.max(Math.floor((window.innerHeight-400)/36)+1,5)),t("page_index",x=Math.min(x,s))},n.$set=function(n){"counters"in n&&t("counters",l=n.counters),"exclude"in n&&t("exclude",d=n.exclude),"sorting"in n&&t("sorting",h=n.sorting),"threshold"in n&&t("threshold",g=n.threshold),"aliases"in n&&t("aliases",m=n.aliases),"ascending"in n&&t("ascending",k=n.ascending),"sortby"in n&&t("sortby",y=n.sortby)},n.$$.update=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{counters:1,$axle_query:1,sorting:1,sortby:1,ascending:1,filtered_reports:1,maxlen:1,page_index:1,last_page:1};(n.counters||n.$axle_query||n.sorting||n.sortby||n.ascending)&&t("filtered_reports",c=l.filter(function(n,e){return n.axle_counter.toLowerCase().includes(a.toLowerCase())||"".concat(n.number_of_crossings).includes(a)||"ignored"===a.toLowerCase()&&n.ignored||"not ignored"===a.toLowerCase()&&!n.ignored||n.crossing_time.includes(a)||""===a}).sort(h[y][k?"asc":"desc"])),(n.filtered_reports||n.maxlen)&&t("last_page",s=Math.floor(c.length/E)),(n.page_index||n.last_page)&&t("page_index",x=x>s?s:x)},{counters:l,exclude:d,sorting:h,threshold:g,aliases:m,ascending:k,sortby:y,show_modal:b,page_index:x,shoveling_date:o,maxlen:E,next:function(){x>=s||t("page_index",x=x>=s?s:x+1)},prev:function(){x<=0||t("page_index",x=x<=0?0:x-1)},shoveling_submit:function(){fetch("".concat(C.api_url,"/shoveling/"),{method:"POST",body:JSON.stringify({id:r.id,shoveling_timestamp:o.toISOString()})}).then(function(){console.log("Success")}).catch(function(n){console.error(n)}).finally(function(){t("show_modal",b=!1),t("shoveling_date",o=null),r=null})},set_sorting:D,register_shoveling:$,filtered_reports:c,last_page:s,click_handler:function(n){return D(n.key)},click_handler_1:function(){return D("days_since_last_crossing")},click_handler_2:function(){return D("ignored")},toggle_handler:function(n){return function(n){n.ignored=!n.ignored;var e="".concat(C.api_url,"/ignored_axle_counters");fetch(e,{method:n.ignored?"POST":"DELETE",body:{name:n.axle_counter}}).catch(function(){console.log("ERROR IN TOGGLE"),n.ignored=!n.ignore})}(n.counter)},click_handler_3:function(n){return $(n.counter)},date_handler:function(n){var e=o=n.detail.date;return t("shoveling_date",o),e},cancel_handler:function(){var n=b=!1;return t("show_modal",b),n},hide_handler:function(){var n=b=!1;return t("show_modal",b),n}}}var Qn=function(n){function l(n){var e;return t(this,l),e=a(this,o(l).call(this)),r(s(e),n,Kn,zn,c,["counters","exclude","sorting","threshold","aliases","ascending","sortby"]),e}return e(l,i),l}();function Zn(n){var e,t,a,o;return{c:function(){e=l("div"),t=l("div"),a=l("div"),this.h()},l:function(n){e=f(n,"DIV",{class:!0},!1);var o=h(e);t=f(o,"DIV",{class:!0,style:!0},!1);var r=h(t);a=f(r,"DIV",{style:!0,class:!0},!1),h(a).forEach(_),r.forEach(_),o.forEach(_),this.h()},h:function(){N(a,"color",n.color),v(a,"class",o="loader-"+n.index+" svelte-354ro"),v(t,"class","scalebox"),N(t,"transform","scale("+n.scale+", "+n.scale+")"),v(e,"class","load-wrapper svelte-354ro")},m:function(n,o){k(n,e,o),w(e,t),w(t,a)},p:function(n,e){n.color&&N(a,"color",e.color),n.index&&o!==(o="loader-"+e.index+" svelte-354ro")&&v(a,"class",o),n.scale&&N(t,"transform","scale("+e.scale+", "+e.scale+")")},i:b,o:b,d:function(n){n&&_(e)}}}function ne(n,e,t){var a=e.index,o=void 0===a?1:a,r=e.scale,c=void 0===r?1:r,s=e.color,i=void 0===s?"#000":s;return t("index",o=o>9?o:"0".concat(o)),n.$set=function(n){"index"in n&&t("index",o=n.index),"scale"in n&&t("scale",c=n.scale),"color"in n&&t("color",i=n.color)},{index:o,scale:c,color:i}}var ee=function(n){function l(n){var e;return t(this,l),e=a(this,o(l).call(this)),r(s(e),n,ne,Zn,c,["index","scale","color"]),e}return e(l,i),l}();function te(n){var e=new Date(n),t=((new Date).getTime()-e.getTime())/1e3,a=Math.ceil(t/86400);if(!(isNaN(a)||a<0))return 0==a&&((t<60?"just now":t<120&&"1 minute ago")||t<3600&&Math.floor(t/60)+" minutes ago"||t<7200&&"1 hour ago"||t<86400&&Math.floor(t/3600)+" hours ago")||1==a&&"1 day ago"||a+" days ago"}var ae=["January","February","March","April","May","June","July","August","September","October","November","December"];function oe(n){var e=n.getFullYear(),t=ae[n.getMonth()],a="".concat(n.getDate()).concat(function(n){if(n>3&&n<21)return"th";switch(n%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(n.getDate())),o=yn(n.getHours()),r=yn(n.getMinutes());return"".concat(t," ").concat(a," ").concat(e," ").concat(o,":").concat(r)}Date.prototype.getWeek=function(){var n=new Date(this.getTime());n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var e=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},Date.prototype.getWeekYear=function(){var n=new Date(this.getTime());return n.setDate(n.getDate()+3-(n.getDay()+6)%7),n.getFullYear()};var re=D.document;function ce(n){var e;return{c:function(){e=l("i"),this.h()},l:function(n){e=f(n,"I",{class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"class","fas fa-upload svelte-1h0spkk")},m:function(n,t){k(n,e,t)},i:b,o:b,d:function(n){n&&_(e)}}}function se(n){var e,t=new ee({props:{index:Math.floor(42*Math.random()+1),scale:1,color:"white"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,a){V(t,n,a),e=!0},i:function(n){e||(M(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function ie(n){var e;return{c:function(){e=l("img"),this.h()},l:function(n){e=f(n,"IMG",{src:!0,alt:!0,width:!0,height:!0,display:!0,class:!0},!1),h(e).forEach(_),this.h()},h:function(){v(e,"src","icons/download.svg"),v(e,"alt","download"),v(e,"width","19"),v(e,"height","19"),v(e,"display","fill: white;"),v(e,"class","svelte-1h0spkk")},m:function(n,t){k(n,e,t)},i:b,o:b,d:function(n){n&&_(e)}}}function le(n){var e,t=new ee({props:{index:Math.floor(42*Math.random()+1),scale:1,color:"white"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,a){V(t,n,a),e=!0},i:function(n){e||(M(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function ue(n){var e,t,a,o={ctx:n,current:null,pending:he,then:fe,catch:de,value:"counters",error:"error",blocks:[,,,]};return U(t=n.reports,o),{c:function(){e=$(),o.block.c()},l:function(n){e=$(),o.block.l(n)},m:function(n,t){k(n,e,t),o.block.m(n,o.anchor=t),o.mount=function(){return e.parentNode},o.anchor=e,a=!0},p:function(e,a){n=a,o.ctx=n,"reports"in e&&t!==(t=n.reports)&&U(t,o)||o.block.p(e,Y(Y({},n),o.resolved))},i:function(n){a||(M(o.block),a=!0)},o:function(n){for(var e=0;e<3;e+=1){var t=o.blocks[e];A(t)}a=!1},d:function(n){n&&_(e),o.block.d(n),o=null}}}function de(n){var e,t,a,o,r,c,s=n.error;return{c:function(){e=l("div"),t=l("span"),a=d("No data was avaliable"),o=u(),r=l("span"),c=d(s),this.h()},l:function(n){e=f(n,"DIV",{class:!0},!1);var i=h(e);t=f(i,"SPAN",{class:!0},!1);var l=h(t);a=g(l,"No data was avaliable"),l.forEach(_),o=g(i,"\r\n                        "),r=f(i,"SPAN",{class:!0},!1);var u=h(r);c=g(u,s),u.forEach(_),i.forEach(_),this.h()},h:function(){v(t,"class","svelte-1h0spkk"),v(r,"class","svelte-1h0spkk"),v(e,"class","error-box svelte-1h0spkk")},m:function(n,s){k(n,e,s),w(e,t),w(t,a),w(e,o),w(e,r),w(r,c)},p:function(n,e){n.reports&&s!==(s=e.error)&&y(c,s)},i:b,o:b,d:function(n){n&&_(e)}}}function fe(n){var e,t=new Qn({props:{counters:n.counters,aliases:C.axle_counter_aliases,sorting:n.sort_methods,sortby:"days_since_last_crossing",ascending:!1,threshold:22,exclude:["id","ignored","ignore","reset_tvs","days_since_last_crossing","crossing_time"]}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,a){V(t,n,a),e=!0},p:function(n,e){var a={};n.reports&&(a.counters=e.counters),n.config&&(a.aliases=C.axle_counter_aliases),n.sort_methods&&(a.sorting=e.sort_methods),t.$set(a)},i:function(n){e||(M(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function he(n){var e,t=new ee({props:{index:Math.floor(42*Math.random()+1),scale:8,color:"#689dc0"}});return{c:function(){t.$$.fragment.c()},l:function(n){t.$$.fragment.l(n)},m:function(n,a){V(t,n,a),e=!0},p:b,i:function(n){e||(M(t.$$.fragment,n),e=!0)},o:function(n){A(t.$$.fragment,n),e=!1},d:function(n){P(t,n)}}}function _e(n){var e,t,a,o,r,c,s,i,b,E,D,$,j,T,I,S,R,U,Y,B,L,C,J,q,G,W,X,z,K,Q,Z,nn,en,tn,an,on,rn,cn,sn,ln,un,dn,fn,hn=oe(n.from_date),_n=oe(n.to_date),gn=[se,ce],vn=[];function pn(n){return n.is_uploading?0:1}U=pn(n),Y=vn[U]=gn[U](n);var kn=[le,ie],wn=[];function yn(n){return n.is_downloading?0:1}J=yn(n),q=wn[J]=kn[J](n);var bn=new mn({});bn.$on("date",n.date_handler),bn.$on("cancel",n.cancel_handler);var xn=new mn({});xn.$on("date",n.date_handler_1),xn.$on("cancel",n.cancel_handler_1);var En=n.reports&&ue(n);return{c:function(){e=u(),t=l("input"),a=u(),o=l("div"),r=l("div"),c=l("div"),s=l("strong"),i=d("axle"),b=d("\r\n            counter"),E=u(),D=l("div"),$=l("div"),j=l("span"),T=d("axle counter reports"),I=u(),S=l("button"),R=l("span"),Y.c(),B=u(),L=l("button"),C=l("span"),q.c(),G=u(),W=l("div"),X=d(hn),z=u(),K=l("div"),bn.$$.fragment.c(),Q=u(),Z=l("span"),nn=d("TO"),en=u(),tn=l("div"),an=d(_n),on=u(),rn=l("div"),xn.$$.fragment.c(),cn=u(),sn=l("input"),ln=u(),un=l("div"),En&&En.c(),this.h()},l:function(n){e=g(n,"\r\n\r\n"),t=f(n,"INPUT",{type:!0,style:!0},!1),h(t).forEach(_),a=g(n,"\r\n"),o=f(n,"DIV",{class:!0},!1);var l=h(o);r=f(l,"DIV",{class:!0},!1);var u=h(r);c=f(u,"DIV",{class:!0},!1);var d=h(c);s=f(d,"STRONG",{class:!0},!1);var v=h(s);i=g(v,"axle"),v.forEach(_),b=g(d,"\r\n            counter"),d.forEach(_),u.forEach(_),E=g(l,"\r\n\r\n    "),D=f(l,"DIV",{class:!0},!1);var m=h(D);$=f(m,"DIV",{class:!0},!1);var p=h($);j=f(p,"SPAN",{class:!0},!1);var k=h(j);T=g(k,"axle counter reports"),k.forEach(_),I=g(p,"\r\n            "),S=f(p,"BUTTON",{title:!0,class:!0},!1);var w=h(S);R=f(w,"SPAN",{class:!0},!1);var y=h(R);Y.l(y),y.forEach(_),w.forEach(_),B=g(p,"\r\n            "),L=f(p,"BUTTON",{title:!0,class:!0},!1);var x=h(L);C=f(x,"SPAN",{class:!0},!1);var N=h(C);q.l(N),N.forEach(_),x.forEach(_),G=g(p,"\r\n            "),W=f(p,"DIV",{class:!0,title:!0},!1);var O=h(W);X=g(O,hn),O.forEach(_),z=g(p,"\r\n            "),K=f(p,"DIV",{class:!0},!1);var M=h(K);bn.$$.fragment.l(M),M.forEach(_),Q=g(p,"\r\n            "),Z=f(p,"SPAN",{class:!0},!1);var A=h(Z);nn=g(A,"TO"),A.forEach(_),en=g(p,"\r\n            "),tn=f(p,"DIV",{class:!0,title:!0},!1);var V=h(tn);an=g(V,_n),V.forEach(_),on=g(p,"\r\n            "),rn=f(p,"DIV",{class:!0},!1);var P=h(rn);xn.$$.fragment.l(P),P.forEach(_),cn=g(p,"\r\n            "),sn=f(p,"INPUT",{type:!0,placeholder:!0,title:!0,class:!0},!1),h(sn).forEach(_),p.forEach(_),ln=g(m,"\r\n        "),un=f(m,"DIV",{class:!0},!1);var F=h(un);En&&En.l(F),F.forEach(_),m.forEach(_),l.forEach(_),this.h()},h:function(){re.title="Axle Counter",v(t,"type","file"),N(t,"width","0"),N(t,"height","0"),v(s,"class","svelte-1h0spkk"),v(c,"class","header svelte-1h0spkk"),v(r,"class","frow"),v(j,"class","title svelte-1h0spkk"),v(R,"class","svelte-1h0spkk"),v(S,"title","Upload axle counter data"),v(S,"class","svelte-1h0spkk"),v(C,"class","svelte-1h0spkk"),v(L,"title","Download axle counter data"),v(L,"class","svelte-1h0spkk"),v(W,"class","pseudo-input svelte-1h0spkk"),v(W,"title","Set a minimum date for axle counter data"),v(K,"class","floater svelte-1h0spkk"),m(K,"hidden",!n.show_from_picker),v(Z,"class","pseudo-input-lbl svelte-1h0spkk"),v(tn,"class","pseudo-input svelte-1h0spkk"),v(tn,"title","Set a maximum date for axle counter data"),v(rn,"class","floater svelte-1h0spkk"),m(rn,"hidden",!n.show_to_picker),v(sn,"type","text"),v(sn,"placeholder","Search"),v(sn,"title","Filter axle counters"),v(sn,"class","svelte-1h0spkk"),v($,"class","content-header svelte-1h0spkk"),v(un,"class","inner-content svelte-1h0spkk"),v(D,"class","content svelte-1h0spkk"),v(o,"class","main-container svelte-1h0spkk"),fn=[p(t,"change",n.upload_file_selected),p(S,"click",n.click_handler),p(L,"click",n.download_report),p(W,"click",n.show_from_date_picker),p(tn,"click",n.show_to_date_picker),p(sn,"input",n.input1_input_handler),p(sn,"input",n.input_handler)]},m:function(l,u){k(l,e,u),k(l,t,u),O(function(){return n.input0_binding(t,null)}),k(l,a,u),k(l,o,u),w(o,r),w(r,c),w(c,s),w(s,i),w(c,b),w(o,E),w(o,D),w(D,$),w($,j),w(j,T),w($,I),w($,S),w(S,R),vn[U].m(R,null),w($,B),w($,L),w(L,C),wn[J].m(C,null),w($,G),w($,W),w(W,X),w($,z),w($,K),V(bn,K,null),w($,Q),w($,Z),w(Z,nn),w($,en),w($,tn),w(tn,an),w($,on),w($,rn),V(xn,rn,null),w($,cn),w($,sn),sn.value=n.query,w(D,ln),w(D,un),En&&En.m(un,null),dn=!0},p:function(n,e){n.items&&(e.input0_binding(null,t),e.input0_binding(t,null));var a=U;(U=pn(e))!==a&&(F(),A(vn[a],1,function(){vn[a]=null}),H(),(Y=vn[U])||(Y=vn[U]=gn[U](e)).c(),M(Y,1),Y.m(R,null));var o=J;(J=yn(e))!==o&&(F(),A(wn[o],1,function(){wn[o]=null}),H(),(q=wn[J])||(q=wn[J]=kn[J](e)).c(),M(q,1),q.m(C,null)),dn&&!n.from_date||hn===(hn=oe(e.from_date))||y(X,hn),n.show_from_picker&&m(K,"hidden",!e.show_from_picker),dn&&!n.to_date||_n===(_n=oe(e.to_date))||y(an,_n),n.show_to_picker&&m(rn,"hidden",!e.show_to_picker),n.query&&sn.value!==e.query&&(sn.value=e.query),e.reports?En?(En.p(n,e),M(En,1)):((En=ue(e)).c(),M(En,1),En.m(un,null)):En&&(F(),A(En,1,function(){En=null}),H())},i:function(n){dn||(M(Y),M(q),M(bn.$$.fragment,n),M(xn.$$.fragment,n),M(En),dn=!0)},o:function(n){A(Y),A(q),A(bn.$$.fragment,n),A(xn.$$.fragment,n),A(En),dn=!1},d:function(r){r&&(_(e),_(t)),n.input0_binding(null,t),r&&(_(a),_(o)),vn[U].d(),wn[J].d(),P(bn),P(xn),En&&En.d(),x(fn)}}}function ge(n){var e=n.getFullYear(),t=n.getMonth()+1,a=n.getDate(),o=n.getHours(),r=n.getMinutes(),c=n.getSeconds();return"".concat(e,"-").concat(yn(t),"-").concat(yn(a)," ").concat(yn(o),":").concat(yn(r),":").concat(yn(c))}function ve(n,e,t){var a,o,r="",c=!1,s=!1,i=!1,l=!1,u=new Date,d=new Date;d.setDate(u.getDate()-30);var f={number_of_crossings:{asc:function(n,e){return n.number_of_crossings||Number.MAX_SAFE_INTEGER-e.number_of_crossings||Number.MAX_SAFE_INTEGER},desc:function(n,e){return e.number_of_crossings||Number.MAX_SAFE_INTEGER-n.number_of_crossings||Number.MAX_SAFE_INTEGER}},axle_counter:{asc:function(n,e){return n.localeCompare(e)},desc:function(n,e){return e.localeCompare(n)}},ignored:{asc:function(n,e){return n.ignored-e.ignored},desc:function(n,e){return e.ignored-n.ignored}},days_since_last_crossing:{asc:function(n,e){return new Date(n.crossing_time)-new Date(e.crossing_time)},desc:function(n,e){return new Date(e.crossing_time)-new Date(n.crossing_time)}}};function h(n){t("from_date",d=n),t("show_from_picker",s=!1),t("reports",a=fetch("".concat(C.api_url,"/axle_counters/report?from=").concat(ge(d),"&to=").concat(ge(u))).then(function(n){return n.json()}).then(function(n){n.sort(function(n,e){return new Date(n.crossing_time)-new Date(e.crossing_time)});var e=!0,t=!1,a=void 0;try{for(var o,r=n[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var c=o.value;c.crossing_time=te(c.crossing_time)||"No crossing time avaliable"}}catch(n){t=!0,a=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}return n}))}function _(n){t("to_date",u=n),t("show_to_picker",c=!1),t("reports",a=fetch("".concat(C.api_url,"/axle_counters/report?from=").concat(ge(d),"&to=").concat(ge(u))).then(function(n){return n.json()}).then(function(n){n.sort(function(n,e){return new Date(n.crossing_time)-new Date(e.crossing_time)});var e=!0,t=!1,a=void 0;try{for(var o,r=n[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var c=o.value;c.crossing_time=te(c.crossing_time)||"No crossing time avaliable"}}catch(n){t=!0,a=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}return n}))}return B(function(){t("reports",a=fetch("".concat(C.api_url,"/axle_counters/report?from=").concat(ge(d),"&to=").concat(ge(u))).then(function(n){return n.json()}).then(function(n){n.sort(function(n,e){return new Date(n.crossing_time)-new Date(e.crossing_time)});var e=!0,t=!1,a=void 0;try{for(var o,r=n[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var c=o.value;c.crossing_time=te(c.crossing_time)||"No crossing time avaliable"}}catch(n){t=!0,a=n}finally{try{e||null==r.return||r.return()}finally{if(t)throw a}}return n}))}),{reports:a,query:r,show_to_picker:c,show_from_picker:s,is_uploading:i,is_downloading:l,to_date:u,from_date:d,file_upload_element:o,sort_methods:f,show_from_date_picker:function(){t("show_to_picker",c=!1),t("show_from_picker",s=!0)},show_to_date_picker:function(){t("show_to_picker",c=!0),t("show_from_picker",s=!1)},from_date_picked:h,to_date_picked:_,download_report:function(){t("is_downloading",l=!0),fetch("".concat(C.api_url,"/axle_counters/report/excel?from=").concat(ge(d),"&to=").concat(ge(u)),{method:"GET"}).then(function(n){return n.blob()}).then(function(n){var e=window.URL.createObjectURL(n),t=document.createElement("a");t.href=e,t.download="axle_counter_report.xlsx",document.body.appendChild(t),t.click(),t.remove()}).catch(function(n){console.error(n)}).finally(function(){t("is_downloading",l=!1)})},upload_file_selected:function(){var n=o.files[0];if(C.allowed_file_types.includes(n.type)){t("is_uploading",i=!0);var e=new FormData;e.append("file",n),fetch("".concat(C.api_url,"/import_excel/"),{method:"POST",body:e}).then(function(n){n.json()}).catch(function(n){console.error(n)}).finally(function(){t("is_uploading",i=!1)})}else console.error("Invalid file type")},input0_binding:function(n,e){t("file_upload_element",o=n)},click_handler:function(){return o.click()},date_handler:function(n){return h(n.detail.date)},cancel_handler:function(){var n=s=!1;return t("show_from_picker",s),n},date_handler_1:function(n){return _(n.detail.date)},cancel_handler_1:function(){var n=c=!1;return t("show_to_picker",c),n},input1_input_handler:function(){r=this.value,t("query",r)},input_handler:function(){return L.sedust(r)}}}export default(function(n){function l(n){var e;return t(this,l),e=a(this,o(l).call(this)),r(s(e),n,ve,_e,c,[]),e}return e(l,i),l}());
//# sourceMappingURL=index.8e82c8c4.js.map
