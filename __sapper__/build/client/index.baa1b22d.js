import{B as e,S as t,i as s,s as n,e as a,o as r,d as o,f as c,h as l,k as i,j as d,q as h,C as u,D as _,l as f,m as g,n as m,r as p,E as v,F as k,p as w,G as y,H as b,c as $,I as x,J as E,g as D,a as j,t as T,b as N,v as O,x as I,z as M,A as S,K as A,L as V,u as P,M as F}from"./chunk.3118f07c.js";const H=e("");var R={api_url:"http://149.212.223.80:443/api",months:["January","February","March","April","May","June","July","August","September","October","November","December"],axle_counter_aliases:{axle_counter:"name",number_of_crossings:"# crossings"},allowed_file_types:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel.sheet.macroEnabled.12"]};function U(e){var t,s,n,k,w,y,b,$,x,E,D=e.ignored?"":"not";return{c(){t=a("div"),s=a("label"),n=a("input"),k=r(),w=a("span"),y=r(),b=a("span"),$=o(D),x=o(" ignored"),this.h()},l(e){t=c(e,"DIV",{class:!0},!1);var a=l(t);s=c(a,"LABEL",{class:!0},!1);var r=l(s);n=c(r,"INPUT",{type:!0,class:!0},!1),l(n).forEach(i),k=d(r,"\r\n        "),w=c(r,"SPAN",{class:!0},!1),l(w).forEach(i),r.forEach(i),y=d(a,"\r\n    "),b=c(a,"SPAN",{class:!0},!1);var o=l(b);$=d(o,D),x=d(o," ignored"),o.forEach(i),a.forEach(i),this.h()},h(){h(n,"type","checkbox"),h(n,"class","svelte-p427kv"),h(w,"class","slider round svelte-p427kv"),h(s,"class","switch svelte-p427kv"),h(b,"class","svelte-p427kv"),u(b,"ignored",e.ignored),u(b,"not-ignored",!e.ignored),h(t,"class","switch-wrap svelte-p427kv"),E=[_(n,"change",e.input_change_handler),_(n,"change",e.emit)]},m(a,r){f(a,t,r),g(t,s),g(s,n),n.checked=e.ignored,g(s,k),g(s,w),g(t,y),g(t,b),g(b,$),g(b,x)},p(e,t){e.ignored&&(n.checked=t.ignored),e.ignored&&D!==(D=t.ignored?"":"not")&&m($,D),e.ignored&&(u(b,"ignored",t.ignored),u(b,"not-ignored",!t.ignored))},i:p,o:p,d(e){e&&i(t),v(E)}}}function Y(e,t,s){const n=k();let{ignored:a=!1}=t;return e.$set=(e=>{"ignored"in e&&s("ignored",a=e.ignored)}),{ignored:a,emit:function(){n("toggle")},input_change_handler:function(){a=this.checked,s("ignored",a)}}}class B extends t{constructor(e){super(),s(this,e,Y,U,n,["ignored"])}}const{Object:L}=b;function C(e,t,s){const n=L.create(e);return n._=t[s],n.i=s,n}function J(e,t,s){const n=L.create(e);return n.date=t[s],n}function q(e,t,s){const n=L.create(e);return n._=t[s],n.i=s,n}function G(e,t,s){const n=L.create(e);return n.i=t[s],n}function W(e,t,s){const n=L.create(e);return n.date=t[s],n}function X(e,t,s){const n=L.create(e);return n.week_number=t[s],n}function z(e){for(var t,s,n,u,_=e.week_number,p=e.weeks[e.week_number],v=[],k=0;k<p.length;k+=1)v[k]=te(W(e,p,k));return{c(){t=a("td"),s=o(_),n=r();for(var e=0;e<v.length;e+=1)v[e].c();u=w(),this.h()},l(e){t=c(e,"TD",{class:!0},!1);var a=l(t);s=d(a,_),a.forEach(i),n=d(e,"\r\n                        ");for(var r=0;r<v.length;r+=1)v[r].l(e);u=w(),this.h()},h(){h(t,"class","week-number svelte-6agj4j")},m(e,a){f(e,t,a),g(t,s),f(e,n,a);for(var r=0;r<v.length;r+=1)v[r].m(e,a);f(e,u,a)},p(e,t){if(e.weeks&&_!==(_=t.week_number)&&m(s,_),e.weeks||e.Object||e.final_day_of_month||e.weekdays||e.is_same_date||e.day_x_next_month||e.year||e.month||e.picked_date||e.Date){p=t.weeks[t.week_number];for(var n=0;n<p.length;n+=1){const s=W(t,p,n);v[n]?v[n].p(e,s):(v[n]=te(s),v[n].c(),v[n].m(u.parentNode,u))}for(;n<v.length;n+=1)v[n].d(1);v.length=p.length}},d(e){e&&(i(t),i(n)),y(v,e),e&&i(u)}}}function K(e){for(var t,s=e.weekdays.slice(e.weeks[e.week_number].length),n=[],a=0;a<s.length;a+=1)n[a]=Q(G(e,s,a));return{c(){for(var e=0;e<n.length;e+=1)n[e].c();t=w()},l(e){for(var s=0;s<n.length;s+=1)n[s].l(e);t=w()},m(e,s){for(var a=0;a<n.length;a+=1)n[a].m(e,s);f(e,t,s)},p(e,a){if(e.is_same_date||e.Date||e.year||e.month||e.weekdays||e.weeks||e.Object||e.picked_date){s=a.weekdays.slice(a.weeks[a.week_number].length);for(var r=0;r<s.length;r+=1){const o=G(a,s,r);n[r]?n[r].p(e,o):(n[r]=Q(o),n[r].c(),n[r].m(t.parentNode,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}},d(e){y(n,e),e&&i(t)}}}function Q(e){var t,s,n,p,v=new e.Date((new e.Date).setDate(e.weeks[e.week_number][0].getDate()-e.i)).getDate();function k(){return e.click_handler(e)}return{c(){t=a("td"),s=o(v),n=r(),this.h()},l(e){t=c(e,"TD",{class:!0},!1);var a=l(t);s=d(a,v),n=d(a,"\r\n                                    "),a.forEach(i),this.h()},h(){h(t,"class","date disabled svelte-6agj4j"),u(t,"today",e.is_same_date(new e.Date(e.year,e.month,1-e.i))),u(t,"picked",e.is_same_date(e.picked_date,new e.Date(e.year,e.month,1-e.i))),p=_(t,"click",k)},m(e,a){f(e,t,a),g(t,s),g(t,n)},p(n,a){e=a,n.weeks&&v!==(v=new e.Date((new e.Date).setDate(e.weeks[e.week_number][0].getDate()-e.i)).getDate())&&m(s,v),(n.is_same_date||n.Date||n.year||n.month||n.weekdays||n.weeks||n.Object)&&u(t,"today",e.is_same_date(new e.Date(e.year,e.month,1-e.i))),(n.is_same_date||n.picked_date||n.Date||n.year||n.month||n.weekdays||n.weeks||n.Object)&&u(t,"picked",e.is_same_date(e.picked_date,new e.Date(e.year,e.month,1-e.i)))},d(e){e&&i(t),p()}}}function Z(e){for(var t,s=e.weekdays.slice(e.weeks[e.week_number].length),n=[],a=0;a<s.length;a+=1)n[a]=ee(q(e,s,a));return{c(){for(var e=0;e<n.length;e+=1)n[e].c();t=w()},l(e){for(var s=0;s<n.length;s+=1)n[s].l(e);t=w()},m(e,s){for(var a=0;a<n.length;a+=1)n[a].m(e,s);f(e,t,s)},p(e,a){if(e.is_same_date||e.day_x_next_month||e.year||e.month||e.picked_date||e.weekdays||e.weeks||e.Object){s=a.weekdays.slice(a.weeks[a.week_number].length);for(var r=0;r<s.length;r+=1){const o=q(a,s,r);n[r]?n[r].p(e,o):(n[r]=ee(o),n[r].c(),n[r].m(t.parentNode,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}},d(e){y(n,e),e&&i(t)}}}function ee(e){var t,s,n,r=e.i+1;function m(){return e.click_handler_2(e)}return{c(){t=a("td"),s=o(r),this.h()},l(e){t=c(e,"TD",{class:!0},!1);var n=l(t);s=d(n,r),n.forEach(i),this.h()},h(){h(t,"class","date disabled svelte-6agj4j"),u(t,"today",e.is_same_date(ie(e.year,e.month,e.i+1))),u(t,"picked",e.is_same_date(e.picked_date,ie(e.year,e.month,e.i+1))),n=_(t,"click",m)},m(e,n){f(e,t,n),g(t,s)},p(s,n){e=n,(s.is_same_date||s.day_x_next_month||s.year||s.month)&&u(t,"today",e.is_same_date(ie(e.year,e.month,e.i+1))),(s.is_same_date||s.picked_date||s.day_x_next_month||s.year||s.month)&&u(t,"picked",e.is_same_date(e.picked_date,ie(e.year,e.month,e.i+1)))},d(e){e&&i(t),n()}}}function te(e){var t,s,n,p,v,k,y=e.date.getDate(),b=1===e.date.getDate()&&K(e);function $(){return e.click_handler_1(e)}var x=e.date.getDate()===le(e.date.getFullYear(),e.date.getMonth()).getDate()&&Z(e);return{c(){b&&b.c(),t=r(),s=a("td"),n=o(y),p=r(),x&&x.c(),v=w(),this.h()},l(e){b&&b.l(e),t=d(e,"\r\n                            "),s=c(e,"TD",{class:!0},!1);var a=l(s);n=d(a,y),a.forEach(i),p=d(e,"\r\n                            "),x&&x.l(e),v=w(),this.h()},h(){h(s,"class","date svelte-6agj4j"),u(s,"picked",e.is_same_date(e.picked_date,e.date)),u(s,"today",e.is_same_date(e.date)),k=_(s,"click",$)},m(e,a){b&&b.m(e,a),f(e,t,a),f(e,s,a),g(s,n),f(e,p,a),x&&x.m(e,a),f(e,v,a)},p(a,r){1===(e=r).date.getDate()?b?b.p(a,e):((b=K(e)).c(),b.m(t.parentNode,t)):b&&(b.d(1),b=null),a.weeks&&y!==(y=e.date.getDate())&&m(n,y),(a.is_same_date||a.picked_date||a.weeks||a.Object)&&u(s,"picked",e.is_same_date(e.picked_date,e.date)),(a.is_same_date||a.weeks||a.Object)&&u(s,"today",e.is_same_date(e.date)),e.date.getDate()===le(e.date.getFullYear(),e.date.getMonth()).getDate()?x?x.p(a,e):((x=Z(e)).c(),x.m(v.parentNode,v)):x&&(x.d(1),x=null)},d(e){b&&b.d(e),e&&(i(t),i(s),i(p)),x&&x.d(e),e&&i(v),k()}}}function se(e){var t,s=(11!==e.month||"1"!==e.week_number)&&z(e);return{c(){t=a("tr"),s&&s.c(),this.h()},l(e){t=c(e,"TR",{class:!0},!1);var n=l(t);s&&s.l(n),n.forEach(i),this.h()},h(){h(t,"class","week svelte-6agj4j")},m(e,n){f(e,t,n),s&&s.m(t,null)},p(e,n){11!==n.month||"1"!==n.week_number?s?s.p(e,n):((s=z(n)).c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&i(t),s&&s.d()}}}function ne(e){for(var t,s,n,u,_=e.weeks[1],m=[],p=0;p<_.length;p+=1)m[p]=oe(J(e,_,p));return{c(){t=a("td"),s=o("1"),n=r();for(var e=0;e<m.length;e+=1)m[e].c();u=w(),this.h()},l(e){t=c(e,"TD",{class:!0},!1);var a=l(t);s=d(a,"1"),a.forEach(i),n=d(e,"\r\n                ");for(var r=0;r<m.length;r+=1)m[r].l(e);u=w(),this.h()},h(){h(t,"class","week-number svelte-6agj4j")},m(e,a){f(e,t,a),g(t,s),f(e,n,a);for(var r=0;r<m.length;r+=1)m[r].m(e,a);f(e,u,a)},p(e,t){if(e.weeks||e.final_day_of_month||e.weekdays||e.is_same_date||e.day_x_next_month||e.year||e.month||e.picked_date){_=t.weeks[1];for(var s=0;s<_.length;s+=1){const n=J(t,_,s);m[s]?m[s].p(e,n):(m[s]=oe(n),m[s].c(),m[s].m(u.parentNode,u))}for(;s<m.length;s+=1)m[s].d(1);m.length=_.length}},d(e){e&&(i(t),i(n)),y(m,e),e&&i(u)}}}function ae(e){for(var t,s=e.weekdays.slice(e.weeks[1].length),n=[],a=0;a<s.length;a+=1)n[a]=re(C(e,s,a));return{c(){for(var e=0;e<n.length;e+=1)n[e].c();t=w()},l(e){for(var s=0;s<n.length;s+=1)n[s].l(e);t=w()},m(e,s){for(var a=0;a<n.length;a+=1)n[a].m(e,s);f(e,t,s)},p(e,a){if(e.is_same_date||e.day_x_next_month||e.year||e.month||e.picked_date||e.weekdays||e.weeks){s=a.weekdays.slice(a.weeks[1].length);for(var r=0;r<s.length;r+=1){const o=C(a,s,r);n[r]?n[r].p(e,o):(n[r]=re(o),n[r].c(),n[r].m(t.parentNode,t))}for(;r<n.length;r+=1)n[r].d(1);n.length=s.length}},d(e){y(n,e),e&&i(t)}}}function re(e){var t,s,n,m,p=e.i+1;function v(){return e.click_handler_4(e)}return{c(){t=a("td"),s=o(p),n=r(),this.h()},l(e){t=c(e,"TD",{class:!0},!1);var a=l(t);s=d(a,p),n=d(a,"\r\n                            "),a.forEach(i),this.h()},h(){h(t,"class","date disabled svelte-6agj4j"),u(t,"today",e.is_same_date(ie(e.year,e.month,e.i+1))),u(t,"picked",e.is_same_date(e.picked_date,ie(e.year,e.month,e.i+1))),m=_(t,"click",v)},m(e,a){f(e,t,a),g(t,s),g(t,n)},p(s,n){e=n,(s.is_same_date||s.day_x_next_month||s.year||s.month)&&u(t,"today",e.is_same_date(ie(e.year,e.month,e.i+1))),(s.is_same_date||s.picked_date||s.day_x_next_month||s.year||s.month)&&u(t,"picked",e.is_same_date(e.picked_date,ie(e.year,e.month,e.i+1)))},d(e){e&&i(t),m()}}}function oe(e){var t,s,n,p,v,k=e.date.getDate();function y(){return e.click_handler_3(e)}var b=e.date.getDate()===le(e.date.getFullYear(),e.date.getMonth()).getDate()&&ae(e);return{c(){t=a("td"),s=o(k),n=r(),b&&b.c(),p=w(),this.h()},l(e){t=c(e,"TD",{class:!0},!1);var a=l(t);s=d(a,k),a.forEach(i),n=d(e,"\r\n                    "),b&&b.l(e),p=w(),this.h()},h(){h(t,"class","date svelte-6agj4j"),u(t,"picked",e.is_same_date(e.picked_date,e.date)),u(t,"today",e.is_same_date(e.date)),v=_(t,"click",y)},m(e,a){f(e,t,a),g(t,s),f(e,n,a),b&&b.m(e,a),f(e,p,a)},p(n,a){e=a,n.weeks&&k!==(k=e.date.getDate())&&m(s,k),(n.is_same_date||n.picked_date||n.weeks)&&u(t,"picked",e.is_same_date(e.picked_date,e.date)),(n.is_same_date||n.weeks)&&u(t,"today",e.is_same_date(e.date)),e.date.getDate()===le(e.date.getFullYear(),e.date.getMonth()).getDate()?b?b.p(n,e):((b=ae(e)).c(),b.m(p.parentNode,p)):b&&(b.d(1),b=null)},d(e){e&&(i(t),i(n)),b&&b.d(e),e&&i(p),v()}}}function ce(e){for(var t,s,n,k,w,b,$,x,E,D,j,T,N,O,I,M,S,A,V,P,F,H,R,U,Y,B,L,C,J,q,G,W,z,K,Q,Z,ee,te,ae,re,oe,ce,le,ie,de,he,ue,_e,fe,ge,me,pe,ve,ke,we,ye,be,$e,xe,Ee,De,je,Te,Ne=e.months[(e.month>0?e.month-1:11)%e.months.length].substring(0,3),Oe=e.months[(e.month+1)%e.months.length].substring(0,3),Ie=e.Object.keys(e.weeks),Me=[],Se=0;Se<Ie.length;Se+=1)Me[Se]=se(X(e,Ie,Se));var Ae=11===e.month&&ne(e);return{c(){t=a("div"),s=a("div"),n=a("div"),k=a("span"),w=o("‹"),b=r(),$=a("span"),x=o(Ne),E=r(),D=a("span"),j=o(e.month_string),T=r(),N=o(e.year),O=r(),I=a("div"),M=a("span"),S=o(Oe),A=r(),V=a("span"),P=o("›"),F=r(),H=a("table"),R=a("thead"),U=a("tr"),Y=a("th"),B=o("#"),L=r(),C=a("th"),J=o("Mon"),q=r(),G=a("th"),W=o("Tue"),z=r(),K=a("th"),Q=o("Wed"),Z=r(),ee=a("th"),te=o("Thu"),ae=r(),re=a("th"),oe=o("Fri"),ce=r(),le=a("th"),ie=o("Sat"),de=r(),he=a("th"),ue=o("Sun"),_e=r(),fe=a("tbody");for(var c=0;c<Me.length;c+=1)Me[c].c();ge=r(),Ae&&Ae.c(),me=r(),pe=a("div"),ve=a("button"),ke=o("×"),we=r(),ye=a("div"),be=a("input"),$e=o("\r\n            :\r\n            "),xe=a("input"),Ee=r(),De=a("button"),je=o("✓"),this.h()},l(a){t=c(a,"DIV",{class:!0},!1);var r=l(t);s=c(r,"DIV",{class:!0},!1);var o=l(s);n=c(o,"DIV",{class:!0},!1);var h=l(n);k=c(h,"SPAN",{class:!0},!1);var u=l(k);w=d(u,"‹"),u.forEach(i),b=d(h,"\r\n            "),$=c(h,"SPAN",{class:!0},!1);var _=l($);x=d(_,Ne),_.forEach(i),h.forEach(i),E=d(o,"\r\n        "),D=c(o,"SPAN",{class:!0},!1);var f=l(D);j=d(f,e.month_string),T=d(f," "),N=d(f,e.year),f.forEach(i),O=d(o,"\r\n        "),I=c(o,"DIV",{class:!0},!1);var g=l(I);M=c(g,"SPAN",{class:!0},!1);var m=l(M);S=d(m,Oe),m.forEach(i),A=d(g,"\r\n            "),V=c(g,"SPAN",{class:!0},!1);var p=l(V);P=d(p,"›"),p.forEach(i),g.forEach(i),o.forEach(i),F=d(r,"\r\n    "),H=c(r,"TABLE",{class:!0},!1);var v=l(H);R=c(v,"THEAD",{class:!0},!1);var y=l(R);U=c(y,"TR",{class:!0},!1);var X=l(U);Y=c(X,"TH",{class:!0},!1);var se=l(Y);B=d(se,"#"),se.forEach(i),L=d(X,"\r\n                "),C=c(X,"TH",{class:!0},!1);var ne=l(C);J=d(ne,"Mon"),ne.forEach(i),q=d(X,"\r\n                "),G=c(X,"TH",{class:!0},!1);var Te=l(G);W=d(Te,"Tue"),Te.forEach(i),z=d(X,"\r\n                "),K=c(X,"TH",{class:!0},!1);var Ie=l(K);Q=d(Ie,"Wed"),Ie.forEach(i),Z=d(X,"\r\n                "),ee=c(X,"TH",{class:!0},!1);var Se=l(ee);te=d(Se,"Thu"),Se.forEach(i),ae=d(X,"\r\n                "),re=c(X,"TH",{class:!0},!1);var Ve=l(re);oe=d(Ve,"Fri"),Ve.forEach(i),ce=d(X,"\r\n                "),le=c(X,"TH",{class:!0},!1);var Pe=l(le);ie=d(Pe,"Sat"),Pe.forEach(i),de=d(X,"\r\n                "),he=c(X,"TH",{class:!0},!1);var Fe=l(he);ue=d(Fe,"Sun"),Fe.forEach(i),X.forEach(i),y.forEach(i),_e=d(v,"\r\n        "),fe=c(v,"TBODY",{class:!0},!1);for(var He=l(fe),Re=0;Re<Me.length;Re+=1)Me[Re].l(He);ge=d(He,"\r\n            "),Ae&&Ae.l(He),He.forEach(i),v.forEach(i),me=d(r,"\r\n    "),pe=c(r,"DIV",{class:!0},!1);var Ue=l(pe);ve=c(Ue,"BUTTON",{class:!0},!1);var Ye=l(ve);ke=d(Ye,"×"),Ye.forEach(i),we=d(Ue,"\r\n        "),ye=c(Ue,"DIV",{class:!0},!1);var Be=l(ye);be=c(Be,"INPUT",{type:!0,class:!0,placeholder:!0},!1),l(be).forEach(i),$e=d(Be,"\r\n            :\r\n            "),xe=c(Be,"INPUT",{type:!0,class:!0,placeholder:!0},!1),l(xe).forEach(i),Be.forEach(i),Ee=d(Ue,"\r\n        "),De=c(Ue,"BUTTON",{class:!0},!1);var Le=l(De);je=d(Le,"✓"),Le.forEach(i),Ue.forEach(i),r.forEach(i),this.h()},h(){h(k,"class","chevron svelte-6agj4j"),h($,"class","month svelte-6agj4j"),h(n,"class","prev svelte-6agj4j"),h(D,"class","current-month"),h(M,"class","month svelte-6agj4j"),h(V,"class","chevron svelte-6agj4j"),h(I,"class","next svelte-6agj4j"),h(s,"class","header svelte-6agj4j"),h(Y,"class","svelte-6agj4j"),h(C,"class","svelte-6agj4j"),h(G,"class","svelte-6agj4j"),h(K,"class","svelte-6agj4j"),h(ee,"class","svelte-6agj4j"),h(re,"class","svelte-6agj4j"),h(le,"class","svelte-6agj4j"),h(he,"class","svelte-6agj4j"),h(U,"class","svelte-6agj4j"),h(R,"class","svelte-6agj4j"),h(fe,"class","svelte-6agj4j"),h(H,"class","svelte-6agj4j"),h(ve,"class","footer-btn cancel svelte-6agj4j"),h(be,"type","text"),h(be,"class","numerical svelte-6agj4j"),h(be,"placeholder","12"),h(xe,"type","text"),h(xe,"class","numerical svelte-6agj4j"),h(xe,"placeholder","48"),h(ye,"class","timepicker svelte-6agj4j"),h(De,"class","footer-btn submit svelte-6agj4j"),u(De,"disabled",""===e.hours||""===e.minutes||!e.picked_date),h(pe,"class","footer svelte-6agj4j"),h(t,"class","datepicker svelte-6agj4j"),Te=[_(n,"click",e.dec_month),_(I,"click",e.inc_month),_(ve,"click",e.cancel),_(be,"input",e.input0_input_handler),_(xe,"input",e.input1_input_handler),_(De,"click",e.submit_date)]},m(a,r){f(a,t,r),g(t,s),g(s,n),g(n,k),g(k,w),g(n,b),g(n,$),g($,x),g(s,E),g(s,D),g(D,j),g(D,T),g(D,N),g(s,O),g(s,I),g(I,M),g(M,S),g(I,A),g(I,V),g(V,P),g(t,F),g(t,H),g(H,R),g(R,U),g(U,Y),g(Y,B),g(U,L),g(U,C),g(C,J),g(U,q),g(U,G),g(G,W),g(U,z),g(U,K),g(K,Q),g(U,Z),g(U,ee),g(ee,te),g(U,ae),g(U,re),g(re,oe),g(U,ce),g(U,le),g(le,ie),g(U,de),g(U,he),g(he,ue),g(H,_e),g(H,fe);for(var o=0;o<Me.length;o+=1)Me[o].m(fe,null);g(fe,ge),Ae&&Ae.m(fe,null),g(t,me),g(t,pe),g(pe,ve),g(ve,ke),g(pe,we),g(pe,ye),g(ye,be),be.value=e.hours,g(ye,$e),g(ye,xe),xe.value=e.minutes,g(pe,Ee),g(pe,De),g(De,je)},p(e,t){if(e.month&&Ne!==(Ne=t.months[(t.month>0?t.month-1:11)%t.months.length].substring(0,3))&&m(x,Ne),e.month_string&&m(j,t.month_string),e.year&&m(N,t.year),e.month&&Oe!==(Oe=t.months[(t.month+1)%t.months.length].substring(0,3))&&m(S,Oe),e.month||e.Object||e.weeks||e.final_day_of_month||e.weekdays||e.is_same_date||e.day_x_next_month||e.year||e.picked_date||e.Date){Ie=t.Object.keys(t.weeks);for(var s=0;s<Ie.length;s+=1){const n=X(t,Ie,s);Me[s]?Me[s].p(e,n):(Me[s]=se(n),Me[s].c(),Me[s].m(fe,ge))}for(;s<Me.length;s+=1)Me[s].d(1);Me.length=Ie.length}11===t.month?Ae?Ae.p(e,t):((Ae=ne(t)).c(),Ae.m(fe,null)):Ae&&(Ae.d(1),Ae=null),e.hours&&be.value!==t.hours&&(be.value=t.hours),e.minutes&&xe.value!==t.minutes&&(xe.value=t.minutes),(e.hours||e.minutes||e.picked_date)&&u(De,"disabled",""===t.hours||""===t.minutes||!t.picked_date)},i:p,o:p,d(e){e&&i(t),y(Me,e),Ae&&Ae.d(),v(Te)}}}function le(e,t){return new Date(e,t+1,0)}function ie(e,t,s){return t+=1,new Date(e,t,s)}function de(e,t,s){let{month:n=(new Date).getMonth(),year:a=(new Date).getFullYear()}=t;const r=k(),o=new Date,c=["January","February","March","April","May","June","July","August","September","October","November","December"];let l,i="",d="";let h,u,_={};return e.$set=(e=>{"month"in e&&s("month",n=e.month),"year"in e&&s("year",a=e.year)}),e.$$.update=((e={month:1,year:1,this_month_days:1,weeks:1})=>{(e.month||e.year)&&s("this_month_days",h=function(e,t){const s=new Date(t,e,1);let n=[];for(;s.getMonth()===e;)n.push(new Date(s)),s.setDate(s.getDate()+1);return n}(n,a)),e.month&&s("month_string",u=c[n%c.length]),(e.this_month_days||e.weeks)&&(s("weeks",_={}),h.forEach(e=>{const t=`${e.getWeek()}`;Object.keys(_).includes(t)||(_[t]=[],s("weeks",_),s("this_month_days",h),s("month",n),s("year",a)),_[t].push(e)}))}),{month:n,year:a,weekdays:[7,6,5,4,3,2,1],months:c,picked_date:l,hours:i,minutes:d,dec_month:function(){s("month",n-=1),n<0&&(s("month",n=11),s("year",--a))},inc_month:function(){s("month",n+=1),n>11&&(s("month",n=0),s("year",++a))},is_same_date:function(e,t){return!!e&&(t=t||o,e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate())},submit_date:function(){""!==i&&""!==d&&l&&(l.setHours(parseInt(i),parseInt(d)),r("date",{date:l}))},cancel:function(){r("cancel")},weeks:_,Date:Date,month_string:u,Object:Object,click_handler:function({i:e}){const t=l=new Date(a,n,1-e);return s("picked_date",l),t},click_handler_1:function({date:e}){const t=l=e;return s("picked_date",l),t},click_handler_2:function({i:e}){const t=l=ie(a,n,e+1);return s("picked_date",l),t},click_handler_3:function({date:e}){const t=l=e;return s("picked_date",l),t},click_handler_4:function({i:e}){const t=l=ie(a,n,e+1);return s("picked_date",l),t},input0_input_handler:function(){i=this.value,s("hours",i)},input1_input_handler:function(){d=this.value,s("minutes",d)}}}class he extends t{constructor(e){super(),s(this,e,de,ce,n,["month","year"])}}function ue(e){var t,s,n,p,k,w,y,b,O,I,M,S,A;const V=e.$$slots.default,P=$(V,e,null);return{c(){t=a("div"),s=a("div"),n=a("div"),p=a("span"),k=o(e.title),w=r(),y=a("span"),b=a("i"),O=r(),I=a("div"),P&&P.c(),this.h()},l(a){t=c(a,"DIV",{class:!0,display:!0},!1);var r=l(t);s=c(r,"DIV",{class:!0},!1);var o=l(s);n=c(o,"DIV",{class:!0,style:!0},!1);var h=l(n);p=c(h,"SPAN",{class:!0},!1);var u=l(p);k=d(u,e.title),u.forEach(i),w=d(h,"\r\n            "),y=c(h,"SPAN",{class:!0},!1);var _=l(y);b=c(_,"I",{class:!0},!1),l(b).forEach(i),_.forEach(i),h.forEach(i),O=d(o,"\r\n        "),I=c(o,"DIV",{class:!0},!1);var f=l(I);P&&P.l(f),f.forEach(i),o.forEach(i),r.forEach(i),this.h()},h(){h(p,"class","title"),h(b,"class","fas fa-close svelte-me2b3v"),h(y,"class","close-btn"),h(n,"class","modal-title svelte-me2b3v"),x(n,"background-color",e.color),h(I,"class","modal-content svelte-me2b3v"),h(s,"class","modal-inner svelte-me2b3v"),h(t,"class","modal-wrapper svelte-me2b3v"),h(t,"display",M="width: "+("auto"===e.width?e.width:"$[width}px")),u(t,"hidden",!e.show),A=[_(b,"click",e.hide_modal),_(t,"click",e.wrapper_click)]},m(a,r){f(a,t,r),g(t,s),g(s,n),g(n,p),g(p,k),g(n,w),g(n,y),g(y,b),g(s,O),g(s,I),P&&P.m(I,null),E(()=>e.div3_binding(t,null)),S=!0},p(e,s){S&&!e.title||m(k,s.title),S&&!e.color||x(n,"background-color",s.color),P&&P.p&&e.$$scope&&P.p(D(V,s,e,null),j(V,s,null)),e.items&&(s.div3_binding(null,t),s.div3_binding(t,null)),S&&!e.width||M===(M="width: "+("auto"===s.width?s.width:"$[width}px"))||h(t,"display",M),e.show&&u(t,"hidden",!s.show)},i(e){S||(T(P,e),S=!0)},o(e){N(P,e),S=!1},d(s){s&&i(t),P&&P.d(s),e.div3_binding(null,t),v(A)}}}function _e(e,t,s){const n=k();let a,{title:r="Modal",color:o="#689dc0",show:c=!1,width:l="auto"}=t;function i(){s("show",c=!1),n("hide")}document.onkeydown=(e=>{"Escape"===e.key&&c&&s("show",c=!1)});let{$$slots:d={},$$scope:h}=t;return e.$set=(e=>{"title"in e&&s("title",r=e.title),"color"in e&&s("color",o=e.color),"show"in e&&s("show",c=e.show),"width"in e&&s("width",l=e.width),"$$scope"in e&&s("$$scope",h=e.$$scope)}),{title:r,color:o,show:c,width:l,modal_binding:a,wrapper_click:function(e){e.target===a&&i()},hide_modal:i,div3_binding:function(e,t){s("modal_binding",a=e)},$$slots:d,$$scope:h}}class fe extends t{constructor(e){super(),s(this,e,_e,ue,n,["title","color","show","width"])}}function ge(e){return e<9?`0${e}`:`${e}`}function me(e,t,s){const n=Object.create(e);return n.key=t[s],n}function pe(e,t,s){const n=Object.create(e);return n.counter=t[s],n.index=s,n}function ve(e,t,s){const n=Object.create(e);return n.key=t[s],n}function ke(e){var t,s,n,o=Object.keys(e.sorting).includes(e.key)&&we(e);function m(e){return Object.keys(e.aliases).includes(e.key)?De:Ee}var p=m(e),v=p(e);function k(){return e.click_handler(e)}return{c(){t=a("th"),o&&o.c(),s=r(),v.c(),this.h()},l(e){t=c(e,"TH",{class:!0},!1);var n=l(t);o&&o.l(n),s=d(n,"\r\n                        "),v.l(n),n.forEach(i),this.h()},h(){h(t,"class","svelte-mf5tkw"),u(t,"sortable",Object.keys(e.sorting).includes(e.key)),n=_(t,"click",k)},m(e,n){f(e,t,n),o&&o.m(t,null),g(t,s),v.m(t,null)},p(n,a){e=a,Object.keys(e.sorting).includes(e.key)?o?o.p(n,e):((o=we(e)).c(),o.m(t,s)):o&&(o.d(1),o=null),p===(p=m(e))&&v?v.p(n,e):(v.d(1),(v=p(e))&&(v.c(),v.m(t,null))),(n.sorting||n.counters)&&u(t,"sortable",Object.keys(e.sorting).includes(e.key))},d(e){e&&i(t),o&&o.d(),v.d(),n()}}}function we(e){var t;function s(e){return e.key===e.sortby?be:ye}var n=s(e),a=n(e);return{c(){a.c(),t=w()},l(e){a.l(e),t=w()},m(e,s){a.m(e,s),f(e,t,s)},p(e,r){n===(n=s(r))&&a?a.p(e,r):(a.d(1),(a=n(r))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&i(t)}}}function ye(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort svelte-mf5tkw")},m(e,s){f(e,t,s)},p:p,d(e){e&&i(t)}}}function be(e){var t;function s(e){return e.ascending?xe:$e}var n=s(e),a=n(e);return{c(){a.c(),t=w()},l(e){a.l(e),t=w()},m(e,s){a.m(e,s),f(e,t,s)},p(e,r){n!==(n=s(r))&&(a.d(1),(a=n(r))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&i(t)}}}function $e(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort-down svelte-mf5tkw")},m(e,s){f(e,t,s)},d(e){e&&i(t)}}}function xe(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort-up svelte-mf5tkw")},m(e,s){f(e,t,s)},d(e){e&&i(t)}}}function Ee(e){var t,s=e.key;return{c(){t=o(s)},l(e){t=d(e,s)},m(e,s){f(e,t,s)},p(e,n){e.counters&&s!==(s=n.key)&&m(t,s)},d(e){e&&i(t)}}}function De(e){var t,s=e.aliases[e.key];return{c(){t=o(s)},l(e){t=d(e,s)},m(e,s){f(e,t,s)},p(e,n){(e.aliases||e.counters)&&s!==(s=n.aliases[n.key])&&m(t,s)},d(e){e&&i(t)}}}function je(e){var t,s=!e.exclude.includes(e.key)&&ke(e);return{c(){s&&s.c(),t=w()},l(e){s&&s.l(e),t=w()},m(e,n){s&&s.m(e,n),f(e,t,n)},p(e,n){n.exclude.includes(n.key)?s&&(s.d(1),s=null):s?s.p(e,n):((s=ke(n)).c(),s.m(t.parentNode,t))},d(e){s&&s.d(e),e&&i(t)}}}function Te(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort svelte-mf5tkw")},m(e,s){f(e,t,s)},p:p,d(e){e&&i(t)}}}function Ne(e){var t;function s(e){return e.ascending?Ie:Oe}var n=s(e),a=n(e);return{c(){a.c(),t=w()},l(e){a.l(e),t=w()},m(e,s){a.m(e,s),f(e,t,s)},p(e,r){n!==(n=s(r))&&(a.d(1),(a=n(r))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&i(t)}}}function Oe(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort-down svelte-mf5tkw")},m(e,s){f(e,t,s)},d(e){e&&i(t)}}}function Ie(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort-up svelte-mf5tkw")},m(e,s){f(e,t,s)},d(e){e&&i(t)}}}function Me(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort svelte-mf5tkw")},m(e,s){f(e,t,s)},p:p,d(e){e&&i(t)}}}function Se(e){var t;function s(e){return e.ascending?Ve:Ae}var n=s(e),a=n(e);return{c(){a.c(),t=w()},l(e){a.l(e),t=w()},m(e,s){a.m(e,s),f(e,t,s)},p(e,r){n!==(n=s(r))&&(a.d(1),(a=n(r))&&(a.c(),a.m(t.parentNode,t)))},d(e){a.d(e),e&&i(t)}}}function Ae(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort-down svelte-mf5tkw")},m(e,s){f(e,t,s)},d(e){e&&i(t)}}}function Ve(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-sort-up svelte-mf5tkw")},m(e,s){f(e,t,s)},d(e){e&&i(t)}}}function Pe(e){for(var t,s,n,u,m,p,v,k,w,b,$,x,E,D,j,M=Object.keys(e.counter),S=[],A=0;A<M.length;A+=1)S[A]=He(me(e,M,A));function V(e){return e.counter.days_since_last_crossing?e.counter.days_since_last_crossing>=e.threshold?Ue:Re:Ye}var P=V(e),F=P(e);var H=new B({props:{ignored:e.counter.ignored}});function R(){return e.click_handler_3(e)}return H.$on("toggle",function(){return e.toggle_handler(e)}),{c(){t=a("tr");for(var e=0;e<S.length;e+=1)S[e].c();s=r(),n=a("td"),F.c(),u=r(),m=a("td"),H.$$.fragment.c(),p=r(),v=a("td"),k=a("button"),w=a("i"),b=r(),$=a("span"),x=o("Register shoveling"),E=r(),this.h()},l(e){t=c(e,"TR",{class:!0},!1);for(var a=l(t),r=0;r<S.length;r+=1)S[r].l(a);s=d(a,"\r\n                    "),n=c(a,"TD",{class:!0},!1);var o=l(n);F.l(o),o.forEach(i),u=d(a,"\r\n                    "),m=c(a,"TD",{class:!0},!1);var h=l(m);H.$$.fragment.l(h),h.forEach(i),p=d(a,"\r\n                    "),v=c(a,"TD",{class:!0},!1);var _=l(v);k=c(_,"BUTTON",{class:!0},!1);var f=l(k);w=c(f,"I",{class:!0},!1),l(w).forEach(i),b=d(f,"\r\n                            "),$=c(f,"SPAN",{class:!0},!1);var g=l($);x=d(g,"Register shoveling"),g.forEach(i),f.forEach(i),_.forEach(i),E=d(a,"\r\n                "),a.forEach(i),this.h()},h(){h(n,"class","svelte-mf5tkw"),h(m,"class","svelte-mf5tkw"),h(w,"class","fas fa-clipboard-check svelte-mf5tkw"),h($,"class","svelte-mf5tkw"),h(k,"class","shoveling-btn svelte-mf5tkw"),h(v,"class","svelte-mf5tkw"),h(t,"class","svelte-mf5tkw"),j=_(k,"click",R)},m(e,a){f(e,t,a);for(var r=0;r<S.length;r+=1)S[r].m(t,null);g(t,s),g(t,n),F.m(n,null),g(t,u),g(t,m),O(H,m,null),g(t,p),g(t,v),g(v,k),g(k,w),g(k,b),g(k,$),g($,x),g(t,E),D=!0},p(a,r){if(e=r,a.exclude||a.filtered_reports){M=Object.keys(e.counter);for(var o=0;o<M.length;o+=1){const n=me(e,M,o);S[o]?S[o].p(a,n):(S[o]=He(n),S[o].c(),S[o].m(t,s))}for(;o<S.length;o+=1)S[o].d(1);S.length=M.length}P===(P=V(e))&&F?F.p(a,e):(F.d(1),(F=P(e))&&(F.c(),F.m(n,null)));var c={};a.filtered_reports&&(c.ignored=e.counter.ignored),H.$set(c)},i(e){D||(T(H.$$.fragment,e),D=!0)},o(e){N(H.$$.fragment,e),D=!1},d(e){e&&i(t),y(S,e),F.d(),I(H),j()}}}function Fe(e){var t,s,n=e.counter[e.key];return{c(){t=a("td"),s=o(n),this.h()},l(e){t=c(e,"TD",{class:!0},!1);var a=l(t);s=d(a,n),a.forEach(i),this.h()},h(){h(t,"class","svelte-mf5tkw")},m(e,n){f(e,t,n),g(t,s)},p(e,t){e.filtered_reports&&n!==(n=t.counter[t.key])&&m(s,n)},d(e){e&&i(t)}}}function He(e){var t,s=!e.exclude.includes(e.key)&&Fe(e);return{c(){s&&s.c(),t=w()},l(e){s&&s.l(e),t=w()},m(e,n){s&&s.m(e,n),f(e,t,n)},p(e,n){n.exclude.includes(n.key)?s&&(s.d(1),s=null):s?s.p(e,n):((s=Fe(n)).c(),s.m(t.parentNode,t))},d(e){s&&s.d(e),e&&i(t)}}}function Re(e){var t,s,n=e.counter.days_since_last_crossing;return{c(){t=o(n),s=o(" days ago")},l(e){t=d(e,n),s=d(e," days ago")},m(e,n){f(e,t,n),f(e,s,n)},p(e,s){e.filtered_reports&&n!==(n=s.counter.days_since_last_crossing)&&m(t,n)},d(e){e&&(i(t),i(s))}}}function Ue(e){var t,s,n,r=e.counter.days_since_last_crossing;return{c(){t=a("div"),s=o(r),n=o(" days ago"),this.h()},l(e){t=c(e,"DIV",{class:!0},!1);var a=l(t);s=d(a,r),n=d(a," days ago"),a.forEach(i),this.h()},h(){h(t,"class","no-last-crossing svelte-mf5tkw")},m(e,a){f(e,t,a),g(t,s),g(t,n)},p(e,t){e.filtered_reports&&r!==(r=t.counter.days_since_last_crossing)&&m(s,r)},d(e){e&&i(t)}}}function Ye(e){var t,s;return{c(){t=a("div"),s=o("NOT CROSSED"),this.h()},l(e){t=c(e,"DIV",{class:!0},!1);var n=l(t);s=d(n,"NOT CROSSED"),n.forEach(i),this.h()},h(){h(t,"class","no-last-crossing svelte-mf5tkw")},m(e,n){f(e,t,n),g(t,s)},p:p,d(e){e&&i(t)}}}function Be(e){var t,s,n=e.index>=e.page_index*e.maxlen&&e.index<=e.page_index*e.maxlen+e.maxlen&&Pe(e);return{c(){n&&n.c(),t=w()},l(e){n&&n.l(e),t=w()},m(e,a){n&&n.m(e,a),f(e,t,a),s=!0},p(e,s){s.index>=s.page_index*s.maxlen&&s.index<=s.page_index*s.maxlen+s.maxlen?n?(n.p(e,s),T(n,1)):((n=Pe(s)).c(),T(n,1),n.m(t.parentNode,t)):n&&(M(),N(n,1,()=>{n=null}),S())},i(e){s||(T(n),s=!0)},o(e){N(n),s=!1},d(e){n&&n.d(e),e&&i(t)}}}function Le(e){var t,s,n,p,v,k=e.shoveling_date?`${R.months[e.shoveling_date.getMonth()]} ${ge(e.shoveling_date.getDate())} ${e.shoveling_date.getFullYear()} ${ge(e.shoveling_date.getHours())}:${ge(e.shoveling_date.getMinutes())}`:"Submit",w=new he({});return w.$on("date",e.date_handler),w.$on("cancel",e.cancel_handler),{c(){w.$$.fragment.c(),t=r(),s=a("button"),n=o(k),this.h()},l(e){w.$$.fragment.l(e),t=d(e,"\r\n    "),s=c(e,"BUTTON",{class:!0},!1);var a=l(s);n=d(a,k),a.forEach(i),this.h()},h(){h(s,"class","submit-shoveling svelte-mf5tkw"),u(s,"disabled",!e.shoveling_date),v=_(s,"click",e.shoveling_submit)},m(e,a){O(w,e,a),f(e,t,a),f(e,s,a),g(s,n),p=!0},p(e,t){p&&!e.shoveling_date||k===(k=t.shoveling_date?`${R.months[t.shoveling_date.getMonth()]} ${ge(t.shoveling_date.getDate())} ${t.shoveling_date.getFullYear()} ${ge(t.shoveling_date.getHours())}:${ge(t.shoveling_date.getMinutes())}`:"Submit")||m(n,k),e.shoveling_date&&u(s,"disabled",!t.shoveling_date)},i(e){p||(T(w.$$.fragment,e),p=!0)},o(e){N(w.$$.fragment,e),p=!1},d(e){I(w,e),e&&(i(t),i(s)),v()}}}function Ce(e){for(var t,s,n,p,k,w,b,$,E,D,j,A,V,P,F,H,R,U,Y,B,L,C,J,q,G,W,X,z,K,Q,Z,ee,te,se,ne=e.page_index+1,ae=e.last_page+1,re=Object.keys(e.counters[0]),oe=[],ce=0;ce<re.length;ce+=1)oe[ce]=je(ve(e,re,ce));function le(e){return"days_since_last_crossing"===e.sortby?Ne:Te}var ie=le(e),de=ie(e);function he(e){return"ignored"===e.sortby?Se:Me}var ue=he(e),_e=ue(e),ge=e.filtered_reports,me=[];for(ce=0;ce<ge.length;ce+=1)me[ce]=Be(pe(e,ge,ce));const ke=e=>N(me[e],1,()=>{me[e]=null});var we=new fe({props:{title:"register shoveling",show:e.show_modal,$$slots:{default:[Le]},$$scope:{ctx:e}}});return we.$on("hide",e.hide_handler),{c(){t=a("table"),s=a("thead"),n=a("tr");for(var e=0;e<oe.length;e+=1)oe[e].c();p=r(),k=a("th"),de.c(),w=o("\r\n                last crossing"),b=r(),$=a("th"),_e.c(),E=o("\r\n                ignored"),D=r(),j=a("th"),A=o("ignore"),V=r(),P=a("th"),F=o("shoveling"),H=r(),R=a("tbody");for(e=0;e<me.length;e+=1)me[e].c();U=r(),Y=a("div"),B=a("div"),L=a("button"),C=o("prev"),J=r(),q=a("span"),G=o("Page "),W=o(ne),X=o(" of "),z=o(ae),K=r(),Q=a("button"),Z=o("next"),ee=r(),we.$$.fragment.c(),this.h()},l(e){t=c(e,"TABLE",{class:!0},!1);var a=l(t);s=c(a,"THEAD",{class:!0},!1);var r=l(s);n=c(r,"TR",{},!1);for(var o=l(n),h=0;h<oe.length;h+=1)oe[h].l(o);p=d(o,"\r\n            "),k=c(o,"TH",{style:!0,class:!0},!1);var u=l(k);de.l(u),w=d(u,"\r\n                last crossing"),u.forEach(i),b=d(o,"\r\n            "),$=c(o,"TH",{style:!0,class:!0},!1);var _=l($);_e.l(_),E=d(_,"\r\n                ignored"),_.forEach(i),D=d(o,"\r\n            "),j=c(o,"TH",{style:!0,class:!0},!1);var f=l(j);A=d(f,"ignore"),f.forEach(i),V=d(o,"\r\n            "),P=c(o,"TH",{style:!0,class:!0},!1);var g=l(P);F=d(g,"shoveling"),g.forEach(i),o.forEach(i),r.forEach(i),H=d(a,"\r\n    "),R=c(a,"TBODY",{class:!0},!1);var m=l(R);for(h=0;h<me.length;h+=1)me[h].l(m);m.forEach(i),a.forEach(i),U=d(e,"\r\n\r\n"),Y=c(e,"DIV",{class:!0},!1);var v=l(Y);B=c(v,"DIV",{class:!0},!1);var y=l(B);L=c(y,"BUTTON",{class:!0},!1);var x=l(L);C=d(x,"prev"),x.forEach(i),J=d(y,"\r\n        "),q=c(y,"SPAN",{class:!0},!1);var T=l(q);G=d(T,"Page "),W=d(T,ne),X=d(T," of "),z=d(T,ae),T.forEach(i),K=d(y,"\r\n        "),Q=c(y,"BUTTON",{class:!0},!1);var N=l(Q);Z=d(N,"next"),N.forEach(i),y.forEach(i),v.forEach(i),ee=d(e,"\r\n\r\n"),we.$$.fragment.l(e),this.h()},h(){x(k,"width","175px"),h(k,"class","svelte-mf5tkw"),u(k,"sortable",Object.keys(e.sorting).includes("days_since_last_crossing")),x($,"width","175px"),h($,"class","svelte-mf5tkw"),u($,"sortable",Object.keys(e.sorting).includes("ignored")),x(j,"width","175px"),h(j,"class","svelte-mf5tkw"),x(P,"width","250px"),h(P,"class","svelte-mf5tkw"),h(s,"class","svelte-mf5tkw"),h(R,"class","svelte-mf5tkw"),h(t,"class","svelte-mf5tkw"),h(L,"class","svelte-mf5tkw"),u(L,"disabled",e.page_index<=0),h(q,"class","svelte-mf5tkw"),h(Q,"class","svelte-mf5tkw"),u(Q,"disabled",e.page_index>=e.last_page),h(B,"class","center-wrap svelte-mf5tkw"),h(Y,"class","table-nav svelte-mf5tkw"),se=[_(k,"click",e.click_handler_1),_($,"click",e.click_handler_2),_(L,"click",e.prev),_(Q,"click",e.next)]},m(e,a){f(e,t,a),g(t,s),g(s,n);for(var r=0;r<oe.length;r+=1)oe[r].m(n,null);g(n,p),g(n,k),de.m(k,null),g(k,w),g(n,b),g(n,$),_e.m($,null),g($,E),g(n,D),g(n,j),g(j,A),g(n,V),g(n,P),g(P,F),g(t,H),g(t,R);for(r=0;r<me.length;r+=1)me[r].m(R,null);f(e,U,a),f(e,Y,a),g(Y,B),g(B,L),g(L,C),g(B,J),g(B,q),g(q,G),g(q,W),g(q,X),g(q,z),g(B,K),g(B,Q),g(Q,Z),f(e,ee,a),O(we,e,a),te=!0},p(e,t){if(e.exclude||e.counters||e.sorting||e.aliases||e.sortby||e.ascending){re=Object.keys(t.counters[0]);for(var s=0;s<re.length;s+=1){const a=ve(t,re,s);oe[s]?oe[s].p(e,a):(oe[s]=je(a),oe[s].c(),oe[s].m(n,p))}for(;s<oe.length;s+=1)oe[s].d(1);oe.length=re.length}if(ie===(ie=le(t))&&de?de.p(e,t):(de.d(1),(de=ie(t))&&(de.c(),de.m(k,w))),e.sorting&&u(k,"sortable",Object.keys(t.sorting).includes("days_since_last_crossing")),ue===(ue=he(t))&&_e?_e.p(e,t):(_e.d(1),(_e=ue(t))&&(_e.c(),_e.m($,E))),e.sorting&&u($,"sortable",Object.keys(t.sorting).includes("ignored")),e.page_index||e.maxlen||e.filtered_reports||e.threshold||e.exclude){ge=t.filtered_reports;for(s=0;s<ge.length;s+=1){const n=pe(t,ge,s);me[s]?(me[s].p(e,n),T(me[s],1)):(me[s]=Be(n),me[s].c(),T(me[s],1),me[s].m(R,null))}for(M(),s=ge.length;s<me.length;s+=1)ke(s);S()}e.page_index&&u(L,"disabled",t.page_index<=0),te&&!e.page_index||ne===(ne=t.page_index+1)||m(W,ne),te&&!e.last_page||ae===(ae=t.last_page+1)||m(z,ae),(e.page_index||e.last_page)&&u(Q,"disabled",t.page_index>=t.last_page);var a={};e.show_modal&&(a.show=t.show_modal),(e.$$scope||e.shoveling_date)&&(a.$$scope={changed:e,ctx:t}),we.$set(a)},i(e){if(!te){for(var t=0;t<ge.length;t+=1)T(me[t]);T(we.$$.fragment,e),te=!0}},o(e){me=me.filter(Boolean);for(let e=0;e<me.length;e+=1)N(me[e]);N(we.$$.fragment,e),te=!1},d(e){e&&i(t),y(oe,e),de.d(),_e.d(),y(me,e),e&&(i(U),i(Y),i(ee)),I(we,e),v(se)}}}function Je(e,t,s){let n;A(e,H,e=>{s("$axle_query",n=e)});let a,r,o,c,{counters:l=[],exclude:i=[],sorting:d={},threshold:h=25,aliases:u={},ascending:_=!1,sortby:f=d[0]}=t,g=!1,m=0,p=Math.max(Math.floor((window.innerHeight-400)/36)+1,5);function v(e){e!==f?(s("ascending",_=!0),s("sortby",f=e)):s("ascending",_=!_)}function k(e){r=e,s("show_modal",g=!0)}return window.onresize=function(e){s("maxlen",p=Math.max(Math.floor((window.innerHeight-400)/36)+1,5)),s("page_index",m=Math.min(m,c))},e.$set=(e=>{"counters"in e&&s("counters",l=e.counters),"exclude"in e&&s("exclude",i=e.exclude),"sorting"in e&&s("sorting",d=e.sorting),"threshold"in e&&s("threshold",h=e.threshold),"aliases"in e&&s("aliases",u=e.aliases),"ascending"in e&&s("ascending",_=e.ascending),"sortby"in e&&s("sortby",f=e.sortby)}),e.$$.update=((e={counters:1,$axle_query:1,sorting:1,sortby:1,ascending:1,filtered_reports:1,maxlen:1,page_index:1,last_page:1})=>{(e.counters||e.$axle_query||e.sorting||e.sortby||e.ascending)&&s("filtered_reports",o=l.filter((e,t)=>e.axle_counter.toLowerCase().includes(n.toLowerCase())||`${e.number_of_crossings}`.includes(n)||"ignored"===n.toLowerCase()&&e.ignored||"not ignored"===n.toLowerCase()&&!e.ignored||e.crossing_time.includes(n)||""===n).sort(d[f][_?"asc":"desc"])),(e.filtered_reports||e.maxlen)&&s("last_page",c=Math.floor(o.length/p)),(e.page_index||e.last_page)&&s("page_index",m=m>c?c:m)}),{counters:l,exclude:i,sorting:d,threshold:h,aliases:u,ascending:_,sortby:f,show_modal:g,page_index:m,shoveling_date:a,maxlen:p,next:function(){m>=c||s("page_index",m=m>=c?c:m+1)},prev:function(){m<=0||s("page_index",m=m<=0?0:m-1)},shoveling_submit:function(){fetch(`${R.api_url}/shoveling/`,{method:"POST",body:JSON.stringify({id:r.id,shoveling_timestamp:a.toISOString()})}).then(()=>{console.log("Success")}).catch(e=>{console.error(e)}).finally(()=>{s("show_modal",g=!1),s("shoveling_date",a=null),r=null})},set_sorting:v,register_shoveling:k,filtered_reports:o,last_page:c,click_handler:function({key:e}){return v(e)},click_handler_1:function(){return v("days_since_last_crossing")},click_handler_2:function(){return v("ignored")},toggle_handler:function({counter:e}){return function(e){e.ignored=!e.ignored;const t=`${R.api_url}/ignored_axle_counters`;fetch(t,{method:e.ignored?"POST":"DELETE",body:{name:e.axle_counter}}).catch(()=>{console.log("ERROR IN TOGGLE"),e.ignored=!e.ignore})}(e)},click_handler_3:function({counter:e}){return k(e)},date_handler:function(e){const t=a=e.detail.date;return s("shoveling_date",a),t},cancel_handler:function(){const e=g=!1;return s("show_modal",g),e},hide_handler:function(){const e=g=!1;return s("show_modal",g),e}}}class qe extends t{constructor(e){super(),s(this,e,Je,Ce,n,["counters","exclude","sorting","threshold","aliases","ascending","sortby"])}}function Ge(e){var t,s,n,r;return{c(){t=a("div"),s=a("div"),n=a("div"),this.h()},l(e){t=c(e,"DIV",{class:!0},!1);var a=l(t);s=c(a,"DIV",{class:!0,style:!0},!1);var r=l(s);n=c(r,"DIV",{style:!0,class:!0},!1),l(n).forEach(i),r.forEach(i),a.forEach(i),this.h()},h(){x(n,"color",e.color),h(n,"class",r="loader-"+e.index+" svelte-354ro"),h(s,"class","scalebox"),x(s,"transform","scale("+e.scale+", "+e.scale+")"),h(t,"class","load-wrapper svelte-354ro")},m(e,a){f(e,t,a),g(t,s),g(s,n)},p(e,t){e.color&&x(n,"color",t.color),e.index&&r!==(r="loader-"+t.index+" svelte-354ro")&&h(n,"class",r),e.scale&&x(s,"transform","scale("+t.scale+", "+t.scale+")")},i:p,o:p,d(e){e&&i(t)}}}function We(e,t,s){let{index:n=1,scale:a=1,color:r="#000"}=t;return s("index",n=n>9?n:`0${n}`),e.$set=(e=>{"index"in e&&s("index",n=e.index),"scale"in e&&s("scale",a=e.scale),"color"in e&&s("color",r=e.color)}),{index:n,scale:a,color:r}}class Xe extends t{constructor(e){super(),s(this,e,We,Ge,n,["index","scale","color"])}}function ze(e){const t=new Date(e),s=((new Date).getTime()-t.getTime())/1e3,n=Math.ceil(s/86400);if(!(isNaN(n)||n<0))return 0==n&&((s<60?"just now":s<120&&"1 minute ago")||s<3600&&Math.floor(s/60)+" minutes ago"||s<7200&&"1 hour ago"||s<86400&&Math.floor(s/3600)+" hours ago")||1==n&&"1 day ago"||n+" days ago"}const Ke=["January","February","March","April","May","June","July","August","September","October","November","December"];function Qe(e){const t=e.getFullYear();return`${Ke[e.getMonth()]} ${`${e.getDate()}${function(e){if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(e.getDate())}`} ${t} ${ge(e.getHours())}:${ge(e.getMinutes())}`}Date.prototype.getWeek=function(){const e=new Date(this.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);const t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},Date.prototype.getWeekYear=function(){const e=new Date(this.getTime());return e.setDate(e.getDate()+3-(e.getDay()+6)%7),e.getFullYear()};const{document:Ze}=b;function et(e){var t;return{c(){t=a("i"),this.h()},l(e){t=c(e,"I",{class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"class","fas fa-upload svelte-1h0spkk")},m(e,s){f(e,t,s)},i:p,o:p,d(e){e&&i(t)}}}function tt(e){var t,s=new Xe({props:{index:Math.floor(42*Math.random()+1),scale:1,color:"white"}});return{c(){s.$$.fragment.c()},l(e){s.$$.fragment.l(e)},m(e,n){O(s,e,n),t=!0},i(e){t||(T(s.$$.fragment,e),t=!0)},o(e){N(s.$$.fragment,e),t=!1},d(e){I(s,e)}}}function st(e){var t;return{c(){t=a("img"),this.h()},l(e){t=c(e,"IMG",{src:!0,alt:!0,width:!0,height:!0,display:!0,class:!0},!1),l(t).forEach(i),this.h()},h(){h(t,"src","icons/download.svg"),h(t,"alt","download"),h(t,"width","19"),h(t,"height","19"),h(t,"display","fill: white;"),h(t,"class","svelte-1h0spkk")},m(e,s){f(e,t,s)},i:p,o:p,d(e){e&&i(t)}}}function nt(e){var t,s=new Xe({props:{index:Math.floor(42*Math.random()+1),scale:1,color:"white"}});return{c(){s.$$.fragment.c()},l(e){s.$$.fragment.l(e)},m(e,n){O(s,e,n),t=!0},i(e){t||(T(s.$$.fragment,e),t=!0)},o(e){N(s.$$.fragment,e),t=!1},d(e){I(s,e)}}}function at(e){var t,s,n;let a={ctx:e,current:null,pending:ct,then:ot,catch:rt,value:"counters",error:"error",blocks:[,,,]};return V(s=e.reports,a),{c(){t=w(),a.block.c()},l(e){t=w(),a.block.l(e)},m(e,s){f(e,t,s),a.block.m(e,a.anchor=s),a.mount=(()=>t.parentNode),a.anchor=t,n=!0},p(t,n){e=n,a.ctx=e,"reports"in t&&s!==(s=e.reports)&&V(s,a)||a.block.p(t,P(P({},e),a.resolved))},i(e){n||(T(a.block),n=!0)},o(e){for(let e=0;e<3;e+=1){const t=a.blocks[e];N(t)}n=!1},d(e){e&&i(t),a.block.d(e),a=null}}}function rt(e){var t,s,n,u,_,v,k=e.error;return{c(){t=a("div"),s=a("span"),n=o("No data was avaliable"),u=r(),_=a("span"),v=o(k),this.h()},l(e){t=c(e,"DIV",{class:!0},!1);var a=l(t);s=c(a,"SPAN",{class:!0},!1);var r=l(s);n=d(r,"No data was avaliable"),r.forEach(i),u=d(a,"\r\n                        "),_=c(a,"SPAN",{class:!0},!1);var o=l(_);v=d(o,k),o.forEach(i),a.forEach(i),this.h()},h(){h(s,"class","svelte-1h0spkk"),h(_,"class","svelte-1h0spkk"),h(t,"class","error-box svelte-1h0spkk")},m(e,a){f(e,t,a),g(t,s),g(s,n),g(t,u),g(t,_),g(_,v)},p(e,t){e.reports&&k!==(k=t.error)&&m(v,k)},i:p,o:p,d(e){e&&i(t)}}}function ot(e){var t,s=new qe({props:{counters:e.counters,aliases:R.axle_counter_aliases,sorting:e.sort_methods,sortby:"days_since_last_crossing",ascending:!1,threshold:22,exclude:["id","ignored","ignore","reset_tvs","days_since_last_crossing","crossing_time"]}});return{c(){s.$$.fragment.c()},l(e){s.$$.fragment.l(e)},m(e,n){O(s,e,n),t=!0},p(e,t){var n={};e.reports&&(n.counters=t.counters),e.config&&(n.aliases=R.axle_counter_aliases),e.sort_methods&&(n.sorting=t.sort_methods),s.$set(n)},i(e){t||(T(s.$$.fragment,e),t=!0)},o(e){N(s.$$.fragment,e),t=!1},d(e){I(s,e)}}}function ct(e){var t,s=new Xe({props:{index:Math.floor(42*Math.random()+1),scale:8,color:"#689dc0"}});return{c(){s.$$.fragment.c()},l(e){s.$$.fragment.l(e)},m(e,n){O(s,e,n),t=!0},p:p,i(e){t||(T(s.$$.fragment,e),t=!0)},o(e){N(s.$$.fragment,e),t=!1},d(e){I(s,e)}}}function lt(e){var t,s,n,p,k,w,y,b,$,D,j,A,V,P,F,H,R,U,Y,B,L,C,J,q,G,W,X,z,K,Q,Z,ee,te,se,ne,ae,re,oe,ce,le,ie,de,ue,_e=Qe(e.from_date),fe=Qe(e.to_date),ge=[tt,et],me=[];function pe(e){return e.is_uploading?0:1}U=pe(e),Y=me[U]=ge[U](e);var ve=[nt,st],ke=[];function we(e){return e.is_downloading?0:1}J=we(e),q=ke[J]=ve[J](e);var ye=new he({});ye.$on("date",e.date_handler),ye.$on("cancel",e.cancel_handler);var be=new he({});be.$on("date",e.date_handler_1),be.$on("cancel",e.cancel_handler_1);var $e=e.reports&&at(e);return{c(){t=r(),s=a("input"),n=r(),p=a("div"),k=a("div"),w=a("div"),y=a("strong"),b=o("axle"),$=o("\r\n            counter"),D=r(),j=a("div"),A=a("div"),V=a("span"),P=o("axle counter reports"),F=r(),H=a("button"),R=a("span"),Y.c(),B=r(),L=a("button"),C=a("span"),q.c(),G=r(),W=a("div"),X=o(_e),z=r(),K=a("div"),ye.$$.fragment.c(),Q=r(),Z=a("span"),ee=o("TO"),te=r(),se=a("div"),ne=o(fe),ae=r(),re=a("div"),be.$$.fragment.c(),oe=r(),ce=a("input"),le=r(),ie=a("div"),$e&&$e.c(),this.h()},l(e){t=d(e,"\r\n\r\n"),s=c(e,"INPUT",{type:!0,style:!0},!1),l(s).forEach(i),n=d(e,"\r\n"),p=c(e,"DIV",{class:!0},!1);var a=l(p);k=c(a,"DIV",{class:!0},!1);var r=l(k);w=c(r,"DIV",{class:!0},!1);var o=l(w);y=c(o,"STRONG",{class:!0},!1);var h=l(y);b=d(h,"axle"),h.forEach(i),$=d(o,"\r\n            counter"),o.forEach(i),r.forEach(i),D=d(a,"\r\n\r\n    "),j=c(a,"DIV",{class:!0},!1);var u=l(j);A=c(u,"DIV",{class:!0},!1);var _=l(A);V=c(_,"SPAN",{class:!0},!1);var f=l(V);P=d(f,"axle counter reports"),f.forEach(i),F=d(_,"\r\n            "),H=c(_,"BUTTON",{title:!0,class:!0},!1);var g=l(H);R=c(g,"SPAN",{class:!0},!1);var m=l(R);Y.l(m),m.forEach(i),g.forEach(i),B=d(_,"\r\n            "),L=c(_,"BUTTON",{title:!0,class:!0},!1);var v=l(L);C=c(v,"SPAN",{class:!0},!1);var x=l(C);q.l(x),x.forEach(i),v.forEach(i),G=d(_,"\r\n            "),W=c(_,"DIV",{class:!0,title:!0},!1);var E=l(W);X=d(E,_e),E.forEach(i),z=d(_,"\r\n            "),K=c(_,"DIV",{class:!0},!1);var T=l(K);ye.$$.fragment.l(T),T.forEach(i),Q=d(_,"\r\n            "),Z=c(_,"SPAN",{class:!0},!1);var N=l(Z);ee=d(N,"TO"),N.forEach(i),te=d(_,"\r\n            "),se=c(_,"DIV",{class:!0,title:!0},!1);var O=l(se);ne=d(O,fe),O.forEach(i),ae=d(_,"\r\n            "),re=c(_,"DIV",{class:!0},!1);var I=l(re);be.$$.fragment.l(I),I.forEach(i),oe=d(_,"\r\n            "),ce=c(_,"INPUT",{type:!0,placeholder:!0,title:!0,class:!0},!1),l(ce).forEach(i),_.forEach(i),le=d(u,"\r\n        "),ie=c(u,"DIV",{class:!0},!1);var M=l(ie);$e&&$e.l(M),M.forEach(i),u.forEach(i),a.forEach(i),this.h()},h(){Ze.title="Axle Counter",h(s,"type","file"),x(s,"width","0"),x(s,"height","0"),h(y,"class","svelte-1h0spkk"),h(w,"class","header svelte-1h0spkk"),h(k,"class","frow"),h(V,"class","title svelte-1h0spkk"),h(R,"class","svelte-1h0spkk"),h(H,"title","Upload axle counter data"),h(H,"class","svelte-1h0spkk"),h(C,"class","svelte-1h0spkk"),h(L,"title","Download axle counter data"),h(L,"class","svelte-1h0spkk"),h(W,"class","pseudo-input svelte-1h0spkk"),h(W,"title","Set a minimum date for axle counter data"),h(K,"class","floater svelte-1h0spkk"),u(K,"hidden",!e.show_from_picker),h(Z,"class","pseudo-input-lbl svelte-1h0spkk"),h(se,"class","pseudo-input svelte-1h0spkk"),h(se,"title","Set a maximum date for axle counter data"),h(re,"class","floater svelte-1h0spkk"),u(re,"hidden",!e.show_to_picker),h(ce,"type","text"),h(ce,"placeholder","Search"),h(ce,"title","Filter axle counters"),h(ce,"class","svelte-1h0spkk"),h(A,"class","content-header svelte-1h0spkk"),h(ie,"class","inner-content svelte-1h0spkk"),h(j,"class","content svelte-1h0spkk"),h(p,"class","main-container svelte-1h0spkk"),ue=[_(s,"change",e.upload_file_selected),_(H,"click",e.click_handler),_(L,"click",e.download_report),_(W,"click",e.show_from_date_picker),_(se,"click",e.show_to_date_picker),_(ce,"input",e.input1_input_handler),_(ce,"input",e.input_handler)]},m(a,r){f(a,t,r),f(a,s,r),E(()=>e.input0_binding(s,null)),f(a,n,r),f(a,p,r),g(p,k),g(k,w),g(w,y),g(y,b),g(w,$),g(p,D),g(p,j),g(j,A),g(A,V),g(V,P),g(A,F),g(A,H),g(H,R),me[U].m(R,null),g(A,B),g(A,L),g(L,C),ke[J].m(C,null),g(A,G),g(A,W),g(W,X),g(A,z),g(A,K),O(ye,K,null),g(A,Q),g(A,Z),g(Z,ee),g(A,te),g(A,se),g(se,ne),g(A,ae),g(A,re),O(be,re,null),g(A,oe),g(A,ce),ce.value=e.query,g(j,le),g(j,ie),$e&&$e.m(ie,null),de=!0},p(e,t){e.items&&(t.input0_binding(null,s),t.input0_binding(s,null));var n=U;(U=pe(t))!==n&&(M(),N(me[n],1,()=>{me[n]=null}),S(),(Y=me[U])||(Y=me[U]=ge[U](t)).c(),T(Y,1),Y.m(R,null));var a=J;(J=we(t))!==a&&(M(),N(ke[a],1,()=>{ke[a]=null}),S(),(q=ke[J])||(q=ke[J]=ve[J](t)).c(),T(q,1),q.m(C,null)),de&&!e.from_date||_e===(_e=Qe(t.from_date))||m(X,_e),e.show_from_picker&&u(K,"hidden",!t.show_from_picker),de&&!e.to_date||fe===(fe=Qe(t.to_date))||m(ne,fe),e.show_to_picker&&u(re,"hidden",!t.show_to_picker),e.query&&ce.value!==t.query&&(ce.value=t.query),t.reports?$e?($e.p(e,t),T($e,1)):(($e=at(t)).c(),T($e,1),$e.m(ie,null)):$e&&(M(),N($e,1,()=>{$e=null}),S())},i(e){de||(T(Y),T(q),T(ye.$$.fragment,e),T(be.$$.fragment,e),T($e),de=!0)},o(e){N(Y),N(q),N(ye.$$.fragment,e),N(be.$$.fragment,e),N($e),de=!1},d(a){a&&(i(t),i(s)),e.input0_binding(null,s),a&&(i(n),i(p)),me[U].d(),ke[J].d(),I(ye),I(be),$e&&$e.d(),v(ue)}}}function it(e){const t=e.getFullYear(),s=e.getMonth()+1,n=e.getDate(),a=e.getHours(),r=e.getMinutes(),o=e.getSeconds();return`${t}-${ge(s)}-${ge(n)} ${ge(a)}:${ge(r)}:${ge(o)}`}function dt(e,t,s){let n,a,r="",o=!1,c=!1,l=!1,i=!1,d=new Date,h=new Date;h.setDate(d.getDate()-30);const u={number_of_crossings:{asc:(e,t)=>e.number_of_crossings||Number.MAX_SAFE_INTEGER-t.number_of_crossings||Number.MAX_SAFE_INTEGER,desc:(e,t)=>t.number_of_crossings||Number.MAX_SAFE_INTEGER-e.number_of_crossings||Number.MAX_SAFE_INTEGER},axle_counter:{asc:(e,t)=>e.localeCompare(t),desc:(e,t)=>t.localeCompare(e)},ignored:{asc:(e,t)=>e.ignored-t.ignored,desc:(e,t)=>t.ignored-e.ignored},days_since_last_crossing:{asc:(e,t)=>new Date(e.crossing_time)-new Date(t.crossing_time),desc:(e,t)=>new Date(t.crossing_time)-new Date(e.crossing_time)}};function _(e){s("from_date",h=e),s("show_from_picker",c=!1),s("reports",n=fetch(`${R.api_url}/axle_counters/report?from=${it(h)}&to=${it(d)}`).then(e=>e.json()).then(e=>{e.sort((e,t)=>new Date(e.crossing_time)-new Date(t.crossing_time));for(const t of e)t.crossing_time=ze(t.crossing_time)||"No crossing time avaliable";return e}))}function f(e){s("to_date",d=e),s("show_to_picker",o=!1),s("reports",n=fetch(`${R.api_url}/axle_counters/report?from=${it(h)}&to=${it(d)}`).then(e=>e.json()).then(e=>{e.sort((e,t)=>new Date(e.crossing_time)-new Date(t.crossing_time));for(const t of e)t.crossing_time=ze(t.crossing_time)||"No crossing time avaliable";return e}))}return F(()=>{s("reports",n=fetch(`${R.api_url}/axle_counters/report?from=${it(h)}&to=${it(d)}`).then(e=>e.json()).then(e=>{e.sort((e,t)=>new Date(e.crossing_time)-new Date(t.crossing_time));for(const t of e)t.crossing_time=ze(t.crossing_time)||"No crossing time avaliable";return e}))}),{reports:n,query:r,show_to_picker:o,show_from_picker:c,is_uploading:l,is_downloading:i,to_date:d,from_date:h,file_upload_element:a,sort_methods:u,show_from_date_picker:function(){s("show_to_picker",o=!1),s("show_from_picker",c=!0)},show_to_date_picker:function(){s("show_to_picker",o=!0),s("show_from_picker",c=!1)},from_date_picked:_,to_date_picked:f,download_report:function(){s("is_downloading",i=!0),fetch(`${R.api_url}/axle_counters/report/excel?from=${it(h)}&to=${it(d)}`,{method:"GET"}).then(e=>e.blob()).then(e=>{const t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="axle_counter_report.xlsx",document.body.appendChild(s),s.click(),s.remove()}).catch(e=>{console.error(e)}).finally(()=>{s("is_downloading",i=!1)})},upload_file_selected:function(){const e=a.files[0];if(!R.allowed_file_types.includes(e.type))return void console.error("Invalid file type");s("is_uploading",l=!0);const t=new FormData;t.append("file",e),fetch(`${R.api_url}/import_excel/`,{method:"POST",body:t}).then(e=>{e.json()}).catch(e=>{console.error(e)}).finally(()=>{s("is_uploading",l=!1)})},input0_binding:function(e,t){s("file_upload_element",a=e)},click_handler:function(){return a.click()},date_handler:function(e){return _(e.detail.date)},cancel_handler:function(){const e=c=!1;return s("show_from_picker",c),e},date_handler_1:function(e){return f(e.detail.date)},cancel_handler_1:function(){const e=o=!1;return s("show_to_picker",o),e},input1_input_handler:function(){r=this.value,s("query",r)},input_handler:function(){return H.sedust(r)}}}export default class extends t{constructor(e){super(),s(this,e,dt,lt,n,[])}}
//# sourceMappingURL=index.baa1b22d.js.map
